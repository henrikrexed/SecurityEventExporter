{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"OpenTelemetry Security Event Exporter","text":"![OpenTelemetry](https://img.shields.io/badge/OpenTelemetry-Collector-orange?style=for-the-badge&amp;logo=opentelemetry) ![Go](https://img.shields.io/badge/Go-1.24-blue?style=for-the-badge&amp;logo=go) ![Docker](https://img.shields.io/badge/Docker-Supported-blue?style=for-the-badge&amp;logo=docker) ![License](https://img.shields.io/badge/License-Apache%202.0-green?style=for-the-badge) ![Version](https://img.shields.io/badge/Version-1.0.0-lightgrey?style=for-the-badge)  **A custom OpenTelemetry Collector exporter that transforms logs into security events**"},{"location":"#overview","title":"\ud83d\udd0d Overview","text":"<p>The Security Event Exporter converts OpenTelemetry log records into security events in JSON format and sends them to a configurable HTTP endpoint. It's particularly useful for:</p> <ul> <li>Security monitoring and alerting</li> <li>SIEM integration</li> <li>Compliance reporting</li> <li>Security event correlation</li> </ul>"},{"location":"#quick-start","title":"\ud83d\ude80 Quick Start","text":"<pre><code># Run with Docker\ndocker run -d \\\n  --name otel-security-exporter \\\n  -p 4317:4317 \\\n  -p 8888:8888 \\\n  hrexed/otel-collector-sec-event:latest\n\n# Send logs to the collector\ncurl -X POST http://localhost:4317/v1/logs \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"resourceLogs\":[{\"resource\":{\"attributes\":[{\"key\":\"service.name\",\"value\":{\"stringValue\":\"my-service\"}}]},\"scopeLogs\":[{\"logRecords\":[{\"body\":{\"stringValue\":\"Security event detected\"},\"severityText\":\"ERROR\"}]}]}]}'\n</code></pre>"},{"location":"#key-features","title":"\u2728 Key Features","text":"<ul> <li>Log to Security Event Transformation: Converts OpenTelemetry logs to structured security events</li> <li>HTTP Endpoint Support: Configurable HTTP endpoint for security event delivery</li> <li>Custom Headers: Support for API tokens and custom headers</li> <li>Default Attributes: Configurable default attributes for all security events</li> <li>Retry Logic: Built-in retry mechanism for failed requests</li> <li>Queue Management: Configurable queue settings for high-throughput scenarios</li> <li>Event Batching: Efficiently batches multiple security events into single HTTP POST requests</li> <li>Telemetry Metrics: Comprehensive metrics for monitoring logs received, events exported, and HTTP performance</li> <li>Docker Support: Pre-built Docker image with OpenTelemetry Collector</li> </ul>"},{"location":"#architecture","title":"\ud83d\udcca Architecture","text":"<pre><code>graph TD\n    A[Log Sources] --&gt; B[OTEL Collector]\n    B --&gt; C[Security Event Exporter]\n    C --&gt; D[HTTP Endpoint]\n    C --&gt; E[Telemetry Metrics]\n\n    subgraph \"Collector Components\"\n        F[Receivers]\n        G[Processors]\n        H[Exporters]\n    end\n\n    B --&gt; F\n    F --&gt; G\n    G --&gt; H\n    H --&gt; C\n\n    subgraph \"Security Event Processing\"\n        I[Log Records]\n        J[Event Conversion]\n        K[Event Batching]\n        L[HTTP POST]\n    end\n\n    C --&gt; I\n    I --&gt; J\n    J --&gt; K\n    K --&gt; L</code></pre>"},{"location":"#telemetry-metrics","title":"\ud83d\udcc8 Telemetry Metrics","text":"<p>The exporter provides comprehensive metrics for monitoring:</p> <pre><code>graph LR\n    A[Logs Received] --&gt; B[Event Conversion]\n    B --&gt; C[Event Batching]\n    C --&gt; D[HTTP Requests]\n    D --&gt; E[Events Exported]\n\n    B --&gt; F[Conversion Errors]\n    D --&gt; G[HTTP Errors]\n\n    style E fill:#90EE90\n    style F fill:#FFB6C1\n    style G fill:#FFB6C1</code></pre>"},{"location":"#docker-support","title":"\ud83d\udc33 Docker Support","text":"<p>Ready-to-use Docker image with all dependencies:</p> <pre><code># Pull the latest image\ndocker pull hrexed/otel-collector-sec-event:latest\n\n# Run with custom configuration\ndocker run -d \\\n  --name otel-security-exporter \\\n  -v $(pwd)/config.yaml:/otel/config.yaml \\\n  hrexed/otel-collector-sec-event:latest \\\n  --config /otel/config.yaml\n</code></pre>"},{"location":"#documentation","title":"\ud83d\udcda Documentation","text":"<p>Explore our comprehensive documentation:</p> <ul> <li>Getting Started - Quick setup and basic configuration</li> <li>Configuration - Detailed configuration options</li> <li>Telemetry Metrics - Monitoring and metrics guide</li> <li>Deployment - Production deployment guide</li> <li>API Reference - Complete API documentation</li> </ul>"},{"location":"#contributing","title":"\ud83e\udd1d Contributing","text":"<p>We welcome contributions! Please see our Contributing Guide for details.</p>"},{"location":"#license","title":"\ud83d\udcc4 License","text":"<p>This project is licensed under the Apache License 2.0 - see the LICENSE file for details.</p>"},{"location":"#support","title":"\ud83c\udd98 Support","text":"<ul> <li>Documentation: Browse this documentation site</li> <li>Issues: Report bugs and request features on GitHub</li> <li>Discussions: Join the conversation in GitHub Discussions</li> </ul> Built with \u2764\ufe0f for the OpenTelemetry community"},{"location":"API/","title":"API Reference","text":""},{"location":"API/#security-event-exporter-api","title":"Security Event Exporter API","text":""},{"location":"API/#configuration-structure","title":"Configuration Structure","text":"<pre><code>type Config struct {\n    Endpoint          string                      `mapstructure:\"endpoint\"`\n    Timeout           time.Duration               `mapstructure:\"timeout\"`\n    Headers           map[string]configopaque.String `mapstructure:\"headers\"`\n    DefaultAttributes map[string]interface{}      `mapstructure:\"default_attributes\"`\n    RetrySettings     map[string]interface{}      `mapstructure:\"retry_on_failure\"`\n    QueueSettings     map[string]interface{}      `mapstructure:\"sending_queue\"`\n}\n</code></pre>"},{"location":"API/#factory-function","title":"Factory Function","text":"<pre><code>func NewFactory() exporter.Factory\n</code></pre> <p>Creates a new factory for the security event exporter.</p>"},{"location":"API/#exporter-interface","title":"Exporter Interface","text":"<p>The exporter implements the <code>exporter.Logs</code> interface:</p> <pre><code>type Logs interface {\n    component.Component\n    ConsumeLogs(ctx context.Context, ld plog.Logs) error\n}\n</code></pre>"},{"location":"API/#methods","title":"Methods","text":""},{"location":"API/#capabilities-consumercapabilities","title":"<code>Capabilities() consumer.Capabilities</code>","text":"<p>Returns the capabilities of the exporter.</p> <pre><code>func (e *securityEventExporter) Capabilities() consumer.Capabilities {\n    return consumer.Capabilities{MutatesData: false}\n}\n</code></pre>"},{"location":"API/#startctx-contextcontext-host-componenthost-error","title":"<code>Start(ctx context.Context, host component.Host) error</code>","text":"<p>Starts the exporter.</p> <pre><code>func (e *securityEventExporter) Start(ctx context.Context, host component.Host) error\n</code></pre>"},{"location":"API/#shutdownctx-contextcontext-error","title":"<code>Shutdown(ctx context.Context) error</code>","text":"<p>Shuts down the exporter.</p> <pre><code>func (e *securityEventExporter) Shutdown(ctx context.Context) error\n</code></pre>"},{"location":"API/#consumelogsctx-contextcontext-ld-ploglogs-error","title":"<code>ConsumeLogs(ctx context.Context, ld plog.Logs) error</code>","text":"<p>Processes incoming logs and converts them to security events.</p> <pre><code>func (e *securityEventExporter) ConsumeLogs(ctx context.Context, ld plog.Logs) error\n</code></pre>"},{"location":"API/#configuration-validation","title":"Configuration Validation","text":""},{"location":"API/#validate-error","title":"<code>Validate() error</code>","text":"<p>Validates the configuration.</p> <pre><code>func (cfg *Config) Validate() error\n</code></pre> <p>Validation rules: - <code>endpoint</code> is required and must not be empty - <code>timeout</code> must be greater than 0 (defaults to 30s if not set)</p>"},{"location":"API/#helper-functions","title":"Helper Functions","text":""},{"location":"API/#createdefaultretrysettings-mapstringinterface","title":"<code>createDefaultRetrySettings() map[string]interface{}</code>","text":"<p>Creates default retry settings.</p> <pre><code>func createDefaultRetrySettings() map[string]interface{} {\n    return map[string]interface{}{\n        \"enabled\":              true,\n        \"initial_interval\":     \"5s\",\n        \"randomization_factor\": 0.5,\n        \"multiplier\":           1.5,\n        \"max_interval\":         \"30s\",\n        \"max_elapsed_time\":     \"5m\",\n    }\n}\n</code></pre>"},{"location":"API/#createdefaultqueuesettings-mapstringinterface","title":"<code>createDefaultQueueSettings() map[string]interface{}</code>","text":"<p>Creates default queue settings.</p> <pre><code>func createDefaultQueueSettings() map[string]interface{} {\n    return map[string]interface{}{\n        \"enabled\":       true,\n        \"num_consumers\": 10,\n        \"queue_size\":    1000,\n    }\n}\n</code></pre>"},{"location":"API/#security-event-format","title":"Security Event Format","text":""},{"location":"API/#json-structure","title":"JSON Structure","text":"<p>Security events are generated as JSON objects with the following structure:</p> <pre><code>{\n  \"timestamp\": \"string\",           // ISO 8601 timestamp\n  \"severity\": \"string\",            // Log severity level\n  \"severity_number\": \"number\",     // Numeric severity level\n  \"message\": \"string\",             // Log message body\n  \"trace_id\": \"string\",            // OpenTelemetry trace ID (if available)\n  \"span_id\": \"string\",             // OpenTelemetry span ID (if available)\n  \"resource.*\": \"string\",          // Resource attributes (prefixed with \"resource.\")\n  \"attributes.*\": \"string\"         // Log attributes (prefixed with \"attributes.\")\n}\n</code></pre>"},{"location":"API/#field-mapping","title":"Field Mapping","text":"OpenTelemetry Field Security Event Field Description <code>Timestamp()</code> <code>timestamp</code> Log timestamp in ISO 8601 format <code>SeverityText()</code> <code>severity</code> Human-readable severity level <code>SeverityNumber()</code> <code>severity_number</code> Numeric severity level <code>Body()</code> <code>message</code> Log message content <code>TraceID()</code> <code>trace_id</code> OpenTelemetry trace ID <code>SpanID()</code> <code>span_id</code> OpenTelemetry span ID Resource attributes <code>resource.*</code> Resource attributes with prefix Log attributes <code>attributes.*</code> Log attributes with prefix"},{"location":"API/#example-security-event","title":"Example Security Event","text":"<pre><code>{\n  \"timestamp\": \"2024-01-15T10:30:00Z\",\n  \"severity\": \"ERROR\",\n  \"severity_number\": 17,\n  \"message\": \"Security alert: Failed login attempt\",\n  \"trace_id\": \"1234567890abcdef1234567890abcdef\",\n  \"span_id\": \"1234567890abcdef\",\n  \"source\": \"opentelemetry-collector\",\n  \"environment\": \"production\",\n  \"resource.service.name\": \"auth-service\",\n  \"resource.host.name\": \"auth-server-01\",\n  \"resource.k8s.pod.name\": \"auth-service-7d4b8c9f6-x8k2m\",\n  \"attributes.user.id\": \"user123\",\n  \"attributes.ip.address\": \"192.168.1.100\",\n  \"attributes.event.type\": \"authentication_failure\",\n  \"attributes.attempt.count\": \"3\"\n}\n</code></pre>"},{"location":"API/#http-client-configuration","title":"HTTP Client Configuration","text":""},{"location":"API/#request-format","title":"Request Format","text":"<ul> <li>Method: POST</li> <li>Content-Type: application/json</li> <li>Body: JSON-encoded security event</li> </ul>"},{"location":"API/#headers","title":"Headers","text":"<p>Custom headers can be configured in the exporter configuration:</p> <pre><code>exporters:\n  securityevent:\n    headers:\n      Authorization: \"Bearer your-api-token\"\n      X-API-Key: \"your-api-key\"\n      X-Source: \"otel-collector\"\n</code></pre>"},{"location":"API/#timeout","title":"Timeout","text":"<p>HTTP request timeout can be configured:</p> <pre><code>exporters:\n  securityevent:\n    timeout: 30s\n</code></pre>"},{"location":"API/#error-handling","title":"Error Handling","text":"<p>The exporter handles HTTP errors with the following behavior:</p> <ul> <li>2xx status codes: Success</li> <li>4xx/5xx status codes: Error logged and retried (if retry is enabled)</li> <li>Network errors: Retried (if retry is enabled)</li> </ul>"},{"location":"API/#dependencies","title":"Dependencies","text":""},{"location":"API/#required-go-modules","title":"Required Go Modules","text":"<ul> <li><code>go.opentelemetry.io/collector/component v1.43.0</code></li> <li><code>go.opentelemetry.io/collector/config/configopaque v1.43.0</code></li> <li><code>go.opentelemetry.io/collector/consumer v1.43.0</code></li> <li><code>go.opentelemetry.io/collector/exporter v1.43.0</code></li> <li><code>go.opentelemetry.io/collector/pdata v1.43.0</code></li> <li><code>go.uber.org/zap v1.27.0</code></li> </ul>"},{"location":"API/#indirect-dependencies","title":"Indirect Dependencies","text":"<ul> <li><code>github.com/go-logr/logr v1.4.3</code></li> <li><code>github.com/go-logr/stdr v1.2.2</code></li> <li><code>github.com/gogo/protobuf v1.3.2</code></li> <li><code>github.com/hashicorp/go-version v1.7.0</code></li> <li><code>github.com/json-iterator/go v1.1.12</code></li> <li><code>github.com/modern-go/concurrent v0.0.0-20180306012644-bacd9c7ef1dd</code></li> <li><code>github.com/modern-go/reflect2 v1.0.3-0.20250322232337-35a7c28c31ee</code></li> <li><code>go.opentelemetry.io/auto/sdk v1.1.0</code></li> <li><code>go.opentelemetry.io/collector/featuregate v1.43.0</code></li> <li><code>go.opentelemetry.io/collector/pipeline v1.43.0</code></li> <li><code>go.opentelemetry.io/contrib/bridges/otelzap v0.13.0</code></li> <li><code>go.opentelemetry.io/otel v1.38.0</code></li> <li><code>go.opentelemetry.io/otel/log v0.14.0</code></li> <li><code>go.opentelemetry.io/otel/metric v1.38.0</code></li> <li><code>go.opentelemetry.io/otel/trace v1.38.0</code></li> <li><code>go.uber.org/multierr v1.11.0</code></li> <li><code>golang.org/x/net v0.42.0</code></li> <li><code>golang.org/x/sys v0.35.0</code></li> <li><code>golang.org/x/text v0.27.0</code></li> <li><code>google.golang.org/genproto/googleapis/rpc v0.0.0-20250804133106-a7a43d27e69b</code></li> <li><code>google.golang.org/grpc v1.76.0</code></li> <li><code>google.golang.org/protobuf v1.36.10</code></li> </ul>"},{"location":"DEPLOYMENT/","title":"Deployment Guide","text":""},{"location":"DEPLOYMENT/#overview","title":"Overview","text":"<p>This guide covers various deployment scenarios for the OpenTelemetry Security Event Exporter, including Docker, Kubernetes, and cloud platforms.</p>"},{"location":"DEPLOYMENT/#prerequisites","title":"Prerequisites","text":"<ul> <li>Docker or Podman</li> <li>Kubernetes cluster (for K8s deployment)</li> <li>Access to the security event endpoint</li> <li>Proper network connectivity</li> </ul>"},{"location":"DEPLOYMENT/#docker-deployment","title":"Docker Deployment","text":""},{"location":"DEPLOYMENT/#basic-docker-run","title":"Basic Docker Run","text":"<pre><code>docker run -d \\\n  --name otel-security-collector \\\n  -p 4317:4317 \\\n  -p 4318:4318 \\\n  -p 8888:8888 \\\n  -p 8889:8889 \\\n  -p 13133:13133 \\\n  -v $(pwd)/collector-config.yaml:/otel/collector-config.yaml \\\n  hrexed/otel-collector-sec-event:dev\n</code></pre>"},{"location":"DEPLOYMENT/#docker-compose","title":"Docker Compose","text":"<p>Create a <code>docker-compose.yml</code> file:</p> <pre><code>version: '3.8'\n\nservices:\n  otel-collector:\n    image: hrexed/otel-collector-sec-event:dev\n    container_name: otel-security-collector\n    ports:\n      - \"4317:4317\"   # OTLP gRPC receiver\n      - \"4318:4318\"   # OTLP HTTP receiver\n      - \"8888:8888\"   # Prometheus metrics\n      - \"8889:8889\"   # Prometheus exporter metrics\n      - \"13133:13133\" # Health check\n    volumes:\n      - ./collector-config.yaml:/otel/collector-config.yaml:ro\n      - ./logs:/var/log/otel:ro\n    environment:\n      - OTEL_LOG_LEVEL=info\n    restart: unless-stopped\n    healthcheck:\n      test: [\"CMD\", \"wget\", \"--no-verbose\", \"--tries=1\", \"--spider\", \"http://localhost:13133/\"]\n      interval: 30s\n      timeout: 30s\n      retries: 3\n      start_period: 5s\n\n  # Example application sending logs\n  test-app:\n    image: nginx:alpine\n    container_name: test-app\n    volumes:\n      - ./nginx.conf:/etc/nginx/nginx.conf:ro\n      - ./logs:/var/log/nginx:ro\n    depends_on:\n      - otel-collector\n</code></pre>"},{"location":"DEPLOYMENT/#environment-variables","title":"Environment Variables","text":"<p>Configure the collector using environment variables:</p> <pre><code>docker run -d \\\n  --name otel-security-collector \\\n  -e OTEL_LOG_LEVEL=debug \\\n  -e SECURITY_ENDPOINT=https://your-endpoint.com/events \\\n  -e API_TOKEN=your-token \\\n  hrexed/otel-collector-sec-event:dev\n</code></pre>"},{"location":"DEPLOYMENT/#kubernetes-deployment","title":"Kubernetes Deployment","text":""},{"location":"DEPLOYMENT/#namespace","title":"Namespace","text":"<pre><code>apiVersion: v1\nkind: Namespace\nmetadata:\n  name: otel-security\n</code></pre>"},{"location":"DEPLOYMENT/#configmap","title":"ConfigMap","text":"<pre><code>apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: otel-config\n  namespace: otel-security\ndata:\n  collector-config.yaml: |\n    receivers:\n      otlp:\n        protocols:\n          grpc:\n            endpoint: 0.0.0.0:4317\n          http:\n            endpoint: 0.0.0.0:4318\n      filelog:\n        include: [\"/var/log/containers/*.log\"]\n        operators:\n          - type: json_parser\n            parse_from: body\n            parse_to: body\n      k8sobjects:\n        objects:\n          - name: events\n            mode: watch\n            group: \"\"\n            version: v1\n            resource: events\n            namespaces: [\"default\", \"kube-system\"]\n\n    processors:\n      memory_limiter:\n        limit_mib: 512\n      batch:\n        timeout: 1s\n        send_batch_size: 1024\n      resource:\n        attributes:\n          - key: k8s.cluster.name\n            value: production\n            action: insert\n      filter:\n        logs:\n          exclude:\n            match_type: regexp\n            record_attributes:\n              - key: message\n                value: \"^(GET|POST|PUT|DELETE) /health\"\n\n    exporters:\n      otlp:\n        endpoint: \"https://your-otel-backend.com:4317\"\n        tls:\n          insecure: false\n      debug:\n        verbosity: basic\n      securityevent:\n        endpoint: \"https://your-security-endpoint.com/events\"\n        timeout: 30s\n        headers:\n          Authorization: \"Bearer ${API_TOKEN}\"\n          Content-Type: \"application/json\"\n        default_attributes:\n          source: \"kubernetes-cluster\"\n          environment: \"production\"\n        retry_on_failure:\n          enabled: true\n          initial_interval: 5s\n          max_interval: 30s\n          max_elapsed_time: 5m\n        sending_queue:\n          enabled: true\n          num_consumers: 10\n          queue_size: 1000\n\n    service:\n      pipelines:\n        logs:\n          receivers: [otlp, filelog, k8sobjects]\n          processors: [memory_limiter, batch, resource, filter]\n          exporters: [otlp, debug, securityevent]\n      telemetry:\n        logs:\n          level: info\n        metrics:\n          address: 0.0.0.0:8888\n</code></pre>"},{"location":"DEPLOYMENT/#secret","title":"Secret","text":"<pre><code>apiVersion: v1\nkind: Secret\nmetadata:\n  name: otel-secrets\n  namespace: otel-security\ntype: Opaque\ndata:\n  api-token: &lt;base64-encoded-token&gt;\n</code></pre>"},{"location":"DEPLOYMENT/#deployment","title":"Deployment","text":"<pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: otel-security-collector\n  namespace: otel-security\n  labels:\n    app: otel-security-collector\nspec:\n  replicas: 2\n  selector:\n    matchLabels:\n      app: otel-security-collector\n  template:\n    metadata:\n      labels:\n        app: otel-security-collector\n    spec:\n      serviceAccountName: otel-collector\n      containers:\n      - name: otel-collector\n        image: hrexed/otel-collector-sec-event:dev\n        ports:\n        - containerPort: 4317\n          name: otlp-grpc\n          protocol: TCP\n        - containerPort: 4318\n          name: otlp-http\n          protocol: TCP\n        - containerPort: 8888\n          name: metrics\n          protocol: TCP\n        - containerPort: 8889\n          name: exporter-metrics\n          protocol: TCP\n        - containerPort: 13133\n          name: health-check\n          protocol: TCP\n        env:\n        - name: API_TOKEN\n          valueFrom:\n            secretKeyRef:\n              name: otel-secrets\n              key: api-token\n        - name: OTEL_LOG_LEVEL\n          value: \"info\"\n        volumeMounts:\n        - name: config\n          mountPath: /otel/collector-config.yaml\n          subPath: collector-config.yaml\n        - name: logs\n          mountPath: /var/log/containers\n          readOnly: true\n        resources:\n          requests:\n            memory: \"256Mi\"\n            cpu: \"200m\"\n          limits:\n            memory: \"512Mi\"\n            cpu: \"500m\"\n        livenessProbe:\n          httpGet:\n            path: /\n            port: 13133\n          initialDelaySeconds: 30\n          periodSeconds: 30\n        readinessProbe:\n          httpGet:\n            path: /\n            port: 13133\n          initialDelaySeconds: 5\n          periodSeconds: 10\n      volumes:\n      - name: config\n        configMap:\n          name: otel-config\n      - name: logs\n        hostPath:\n          path: /var/log/containers\n</code></pre>"},{"location":"DEPLOYMENT/#service","title":"Service","text":"<pre><code>apiVersion: v1\nkind: Service\nmetadata:\n  name: otel-security-collector\n  namespace: otel-security\n  labels:\n    app: otel-security-collector\nspec:\n  type: ClusterIP\n  ports:\n  - name: otlp-grpc\n    port: 4317\n    targetPort: 4317\n    protocol: TCP\n  - name: otlp-http\n    port: 4318\n    targetPort: 4318\n    protocol: TCP\n  - name: metrics\n    port: 8888\n    targetPort: 8888\n    protocol: TCP\n  - name: exporter-metrics\n    port: 8889\n    targetPort: 8889\n    protocol: TCP\n  - name: health-check\n    port: 13133\n    targetPort: 13133\n    protocol: TCP\n  selector:\n    app: otel-security-collector\n</code></pre>"},{"location":"DEPLOYMENT/#serviceaccount-and-rbac","title":"ServiceAccount and RBAC","text":"<pre><code>apiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: otel-collector\n  namespace: otel-security\n\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRole\nmetadata:\n  name: otel-collector\nrules:\n- apiGroups: [\"\"]\n  resources: [\"events\"]\n  verbs: [\"get\", \"list\", \"watch\"]\n- apiGroups: [\"\"]\n  resources: [\"pods\", \"nodes\", \"services\"]\n  verbs: [\"get\", \"list\", \"watch\"]\n\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRoleBinding\nmetadata:\n  name: otel-collector\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: otel-collector\nsubjects:\n- kind: ServiceAccount\n  name: otel-collector\n  namespace: otel-security\n</code></pre>"},{"location":"DEPLOYMENT/#daemonset-for-node-level-collection","title":"DaemonSet (for node-level collection)","text":"<pre><code>apiVersion: apps/v1\nkind: DaemonSet\nmetadata:\n  name: otel-security-collector-daemonset\n  namespace: otel-security\n  labels:\n    app: otel-security-collector\nspec:\n  selector:\n    matchLabels:\n      app: otel-security-collector\n  template:\n    metadata:\n      labels:\n        app: otel-security-collector\n    spec:\n      serviceAccountName: otel-collector\n      hostNetwork: true\n      containers:\n      - name: otel-collector\n        image: hrexed/otel-collector-sec-event:dev\n        ports:\n        - containerPort: 4317\n          name: otlp-grpc\n          protocol: TCP\n        - containerPort: 4318\n          name: otlp-http\n          protocol: TCP\n        - containerPort: 8888\n          name: metrics\n          protocol: TCP\n        - containerPort: 13133\n          name: health-check\n          protocol: TCP\n        env:\n        - name: API_TOKEN\n          valueFrom:\n            secretKeyRef:\n              name: otel-secrets\n              key: api-token\n        - name: OTEL_LOG_LEVEL\n          value: \"info\"\n        - name: NODE_NAME\n          valueFrom:\n            fieldRef:\n              fieldPath: spec.nodeName\n        volumeMounts:\n        - name: config\n          mountPath: /otel/collector-config.yaml\n          subPath: collector-config.yaml\n        - name: varlog\n          mountPath: /var/log\n          readOnly: true\n        - name: varlibdockercontainers\n          mountPath: /var/lib/docker/containers\n          readOnly: true\n        resources:\n          requests:\n            memory: \"256Mi\"\n            cpu: \"200m\"\n          limits:\n            memory: \"512Mi\"\n            cpu: \"500m\"\n        securityContext:\n          runAsUser: 0\n      volumes:\n      - name: config\n        configMap:\n          name: otel-config\n      - name: varlog\n        hostPath:\n          path: /var/log\n      - name: varlibdockercontainers\n        hostPath:\n          path: /var/lib/docker/containers\n</code></pre>"},{"location":"DEPLOYMENT/#helm-chart","title":"Helm Chart","text":""},{"location":"DEPLOYMENT/#chart-structure","title":"Chart Structure","text":"<pre><code>helm-chart/\n\u251c\u2500\u2500 Chart.yaml\n\u251c\u2500\u2500 values.yaml\n\u251c\u2500\u2500 templates/\n\u2502   \u251c\u2500\u2500 deployment.yaml\n\u2502   \u251c\u2500\u2500 service.yaml\n\u2502   \u251c\u2500\u2500 configmap.yaml\n\u2502   \u251c\u2500\u2500 secret.yaml\n\u2502   \u251c\u2500\u2500 serviceaccount.yaml\n\u2502   \u251c\u2500\u2500 rbac.yaml\n\u2502   \u2514\u2500\u2500 daemonset.yaml\n\u2514\u2500\u2500 README.md\n</code></pre>"},{"location":"DEPLOYMENT/#chartyaml","title":"Chart.yaml","text":"<pre><code>apiVersion: v2\nname: otel-security-collector\ndescription: OpenTelemetry Collector with Security Event Exporter\nversion: 1.0.0\nappVersion: \"1.0.0\"\nkeywords:\n  - opentelemetry\n  - collector\n  - security\n  - logging\nhome: https://github.com/your-org/SecurityEventExporter\nsources:\n  - https://github.com/your-org/SecurityEventExporter\nmaintainers:\n  - name: Your Name\n    email: your.email@example.com\n</code></pre>"},{"location":"DEPLOYMENT/#valuesyaml","title":"values.yaml","text":"<pre><code>image:\n  repository: hrexed/otel-collector-sec-event\n  tag: dev\n  pullPolicy: IfNotPresent\n\nreplicaCount: 2\n\nservice:\n  type: ClusterIP\n  ports:\n    otlp-grpc: 4317\n    otlp-http: 4318\n    metrics: 8888\n    exporter-metrics: 8889\n    health-check: 13133\n\nsecurityEvent:\n  endpoint: \"https://your-security-endpoint.com/events\"\n  timeout: 30s\n  headers: {}\n  defaultAttributes:\n    source: \"kubernetes-cluster\"\n    environment: \"production\"\n  retryOnFailure:\n    enabled: true\n    initialInterval: 5s\n    maxInterval: 30s\n    maxElapsedTime: 5m\n  sendingQueue:\n    enabled: true\n    numConsumers: 10\n    queueSize: 1000\n\nresources:\n  requests:\n    memory: \"256Mi\"\n    cpu: \"200m\"\n  limits:\n    memory: \"512Mi\"\n    cpu: \"500m\"\n\nnodeSelector: {}\n\ntolerations: []\n\naffinity: {}\n\nserviceAccount:\n  create: true\n  annotations: {}\n  name: \"\"\n\nrbac:\n  create: true\n\npodAnnotations: {}\n\npodSecurityContext:\n  fsGroup: 2000\n\nsecurityContext:\n  capabilities:\n    drop:\n    - ALL\n  readOnlyRootFilesystem: true\n  runAsNonRoot: true\n  runAsUser: 1000\n\nlivenessProbe:\n  httpGet:\n    path: /\n    port: 13133\n  initialDelaySeconds: 30\n  periodSeconds: 30\n\nreadinessProbe:\n  httpGet:\n    path: /\n    port: 13133\n  initialDelaySeconds: 5\n  periodSeconds: 10\n</code></pre>"},{"location":"DEPLOYMENT/#cloud-platform-deployment","title":"Cloud Platform Deployment","text":""},{"location":"DEPLOYMENT/#aws-eks","title":"AWS EKS","text":"<pre><code># Create EKS cluster\neksctl create cluster --name otel-security --region us-west-2\n\n# Deploy using Helm\nhelm install otel-security ./helm-chart \\\n  --set securityEvent.endpoint=\"https://your-aws-endpoint.com/events\" \\\n  --set securityEvent.headers.Authorization=\"Bearer ${AWS_TOKEN}\"\n</code></pre>"},{"location":"DEPLOYMENT/#google-gke","title":"Google GKE","text":"<pre><code># Create GKE cluster\ngcloud container clusters create otel-security \\\n  --zone us-central1-a \\\n  --num-nodes 3\n\n# Deploy using Helm\nhelm install otel-security ./helm-chart \\\n  --set securityEvent.endpoint=\"https://your-gcp-endpoint.com/events\" \\\n  --set securityEvent.headers.Authorization=\"Bearer ${GCP_TOKEN}\"\n</code></pre>"},{"location":"DEPLOYMENT/#azure-aks","title":"Azure AKS","text":"<pre><code># Create AKS cluster\naz aks create \\\n  --resource-group myResourceGroup \\\n  --name otel-security \\\n  --node-count 3 \\\n  --enable-addons monitoring\n\n# Deploy using Helm\nhelm install otel-security ./helm-chart \\\n  --set securityEvent.endpoint=\"https://your-azure-endpoint.com/events\" \\\n  --set securityEvent.headers.Authorization=\"Bearer ${AZURE_TOKEN}\"\n</code></pre>"},{"location":"DEPLOYMENT/#monitoring-and-observability","title":"Monitoring and Observability","text":""},{"location":"DEPLOYMENT/#prometheus-metrics","title":"Prometheus Metrics","text":"<p>The collector exposes metrics at <code>http://localhost:8888/metrics</code>:</p> <pre><code># Prometheus scrape config\nscrape_configs:\n  - job_name: 'otel-collector'\n    static_configs:\n      - targets: ['otel-collector:8888']\n    scrape_interval: 15s\n</code></pre>"},{"location":"DEPLOYMENT/#grafana-dashboard","title":"Grafana Dashboard","text":"<p>Create a Grafana dashboard to monitor:</p> <ul> <li>Collector health</li> <li>Processing rates</li> <li>Error rates</li> <li>Queue sizes</li> <li>Memory usage</li> </ul>"},{"location":"DEPLOYMENT/#alerting-rules","title":"Alerting Rules","text":"<pre><code>groups:\n  - name: otel-collector\n    rules:\n      - alert: OtelCollectorDown\n        expr: up{job=\"otel-collector\"} == 0\n        for: 1m\n        labels:\n          severity: critical\n        annotations:\n          summary: \"OpenTelemetry Collector is down\"\n\n      - alert: OtelCollectorHighErrorRate\n        expr: rate(otelcol_exporter_send_failed_logs_total[5m]) &gt; 0.1\n        for: 5m\n        labels:\n          severity: warning\n        annotations:\n          summary: \"High error rate in OpenTelemetry Collector\"\n</code></pre>"},{"location":"DEPLOYMENT/#troubleshooting","title":"Troubleshooting","text":""},{"location":"DEPLOYMENT/#common-issues","title":"Common Issues","text":"<ol> <li>Collector not starting: Check configuration syntax and required fields</li> <li>Connection refused: Verify endpoint URL and network connectivity</li> <li>Authentication failed: Check API tokens and headers</li> <li>High memory usage: Adjust queue size and number of consumers</li> <li>Slow performance: Check network latency and endpoint response times</li> </ol>"},{"location":"DEPLOYMENT/#debug-commands","title":"Debug Commands","text":"<pre><code># Check collector logs\nkubectl logs -f deployment/otel-security-collector -n otel-security\n\n# Check collector health\ncurl http://localhost:13133/\n\n# Check metrics\ncurl http://localhost:8888/metrics\n\n# Test configuration\ndocker run --rm -v $(pwd)/collector-config.yaml:/config.yaml \\\n  hrexed/otel-collector-sec-event:dev --config /config.yaml --dry-run\n</code></pre>"},{"location":"DEPLOYMENT/#performance-tuning","title":"Performance Tuning","text":"<p>For high-throughput scenarios:</p> <pre><code>exporters:\n  securityevent:\n    sending_queue:\n      num_consumers: 20\n      queue_size: 5000\n    retry_on_failure:\n      max_elapsed_time: 10m\n</code></pre>"},{"location":"DEPLOYMENT/#security-considerations","title":"Security Considerations","text":"<ol> <li>Use TLS: Always use HTTPS for the security event endpoint</li> <li>API Tokens: Store API tokens in Kubernetes secrets</li> <li>Network Policies: Implement network policies to restrict traffic</li> <li>RBAC: Use proper RBAC for Kubernetes resources</li> <li>Image Security: Use trusted base images and scan for vulnerabilities</li> </ol>"},{"location":"LOGGING/","title":"Logging and Debugging Guide","text":""},{"location":"LOGGING/#overview","title":"Overview","text":"<p>The OpenTelemetry Security Event Exporter includes comprehensive logging capabilities to help with debugging, monitoring, and troubleshooting. The exporter uses structured logging with different log levels to provide detailed information about its operation.</p>"},{"location":"LOGGING/#log-levels","title":"Log Levels","text":"<p>The exporter supports the following log levels:</p> <ul> <li>INFO: General operational information</li> <li>DEBUG: Detailed debugging information</li> <li>ERROR: Error conditions and failures</li> <li>WARN: Warning conditions (currently not used)</li> </ul>"},{"location":"LOGGING/#configuration","title":"Configuration","text":""},{"location":"LOGGING/#setting-log-level","title":"Setting Log Level","text":"<p>Configure the log level in your collector configuration using the <code>telemetry</code> section:</p> <pre><code>service:\n  telemetry:\n    logs:\n      level: debug  # Options: debug, info, warn, error\n    metrics:\n      address: 0.0.0.0:8888\n</code></pre>"},{"location":"LOGGING/#environment-variable","title":"Environment Variable","text":"<p>You can also set the log level using an environment variable:</p> <pre><code>export OTEL_LOG_LEVEL=debug\n</code></pre>"},{"location":"LOGGING/#log-categories","title":"Log Categories","text":""},{"location":"LOGGING/#1-exporter-lifecycle","title":"1. Exporter Lifecycle","text":""},{"location":"LOGGING/#startup","title":"Startup","text":"<pre><code>INFO    Creating security event logs exporter\nDEBUG   Security event exporter configuration    {\"endpoint\": \"https://api.example.com/events\", \"timeout\": \"30s\", \"header_count\": 2, \"default_attribute_count\": 3}\nDEBUG   Configuration validation passed\nDEBUG   Created HTTP client    {\"timeout\": \"30s\"}\nINFO    Successfully created security event logs exporter\nINFO    Starting security event exporter    {\"endpoint\": \"https://api.example.com/events\", \"timeout\": \"30s\", \"header_count\": 2, \"default_attribute_count\": 3}\nDEBUG   Security event exporter configuration    {\"retry_settings\": {...}, \"queue_settings\": {...}}\n</code></pre>"},{"location":"LOGGING/#shutdown","title":"Shutdown","text":"<pre><code>INFO    Shutting down security event exporter\nDEBUG   Security event exporter shutdown completed\n</code></pre>"},{"location":"LOGGING/#2-log-processing","title":"2. Log Processing","text":""},{"location":"LOGGING/#batch-processing","title":"Batch Processing","text":"<pre><code>DEBUG   Processing logs batch    {\"resource_logs_count\": 5}\nDEBUG   Processing resource log    {\"resource_index\": 0, \"scope_logs_count\": 2}\nDEBUG   Processing scope log    {\"scope_index\": 0, \"log_records_count\": 10}\n</code></pre>"},{"location":"LOGGING/#individual-log-records","title":"Individual Log Records","text":"<pre><code>DEBUG   Processing log record    {\"log_index\": 0, \"severity\": \"ERROR\", \"timestamp\": 1703268600}\nDEBUG   Successfully converted log to security event    {\"event_field_count\": 15}\nDEBUG   Successfully sent security event    {\"successful_count\": 1}\n</code></pre>"},{"location":"LOGGING/#batch-summary","title":"Batch Summary","text":"<pre><code>INFO    Completed processing logs batch    {\"total_resource_logs\": 5, \"total_log_records\": 50, \"successful_events\": 48, \"failed_events\": 2}\n</code></pre>"},{"location":"LOGGING/#3-security-event-conversion","title":"3. Security Event Conversion","text":""},{"location":"LOGGING/#default-attributes","title":"Default Attributes","text":"<pre><code>DEBUG   Added default attributes    {\"count\": 3}\n</code></pre>"},{"location":"LOGGING/#resource-attributes","title":"Resource Attributes","text":"<pre><code>DEBUG   Added resource attributes    {\"count\": 8}\nDEBUG   Added resource attribute    {\"key\": \"resource.service.name\", \"value\": \"auth-service\"}\nDEBUG   Added resource attribute    {\"key\": \"resource.host.name\", \"value\": \"server-01\"}\n</code></pre>"},{"location":"LOGGING/#log-attributes","title":"Log Attributes","text":"<pre><code>DEBUG   Added log attributes    {\"count\": 5}\nDEBUG   Added log attribute    {\"key\": \"attributes.user.id\", \"value\": \"user123\"}\nDEBUG   Added log attribute    {\"key\": \"attributes.event.type\", \"value\": \"authentication_failure\"}\n</code></pre>"},{"location":"LOGGING/#log-record-fields","title":"Log Record Fields","text":"<pre><code>DEBUG   Added log record fields    {\"timestamp\": \"2024-01-15T10:30:00Z\", \"severity\": \"ERROR\", \"severity_number\": 17}\n</code></pre>"},{"location":"LOGGING/#trace-and-span-information","title":"Trace and Span Information","text":"<pre><code>DEBUG   Added trace ID    {\"trace_id\": \"1234567890abcdef1234567890abcdef\"}\nDEBUG   Added span ID    {\"span_id\": \"1234567890abcdef\"}\n</code></pre>"},{"location":"LOGGING/#message-body","title":"Message Body","text":"<pre><code>DEBUG   Added string message body    {\"message_preview\": \"Security alert: Failed login attempt for user user123 from IP 192.168.1.100\"}\nDEBUG   Added bytes message body    {\"message_length\": 1024}\nDEBUG   Log body has unsupported type    {\"type\": \"Map\"}\n</code></pre>"},{"location":"LOGGING/#conversion-summary","title":"Conversion Summary","text":"<pre><code>DEBUG   Completed log to security event conversion    {\"total_fields\": 15}\n</code></pre>"},{"location":"LOGGING/#4-http-communication","title":"4. HTTP Communication","text":""},{"location":"LOGGING/#request-preparation","title":"Request Preparation","text":"<pre><code>DEBUG   Starting to send security event    {\"endpoint\": \"https://api.example.com/events\", \"event_field_count\": 15}\nDEBUG   Successfully marshaled security event to JSON    {\"json_size_bytes\": 1024, \"json_preview\": \"{\\\"timestamp\\\":\\\"2024-01-15T10:30:00Z\\\",\\\"severity\\\":\\\"ERROR\\\"...\"}\nDEBUG   Created HTTP request    {\"url\": \"https://api.example.com/events\", \"method\": \"POST\"}\n</code></pre>"},{"location":"LOGGING/#headers","title":"Headers","text":"<pre><code>DEBUG   Added custom header    {\"header_name\": \"Authorization\", \"is_sensitive\": true}\nDEBUG   Added custom header    {\"header_name\": \"X-API-Key\", \"is_sensitive\": true}\nDEBUG   Set HTTP headers    {\"total_headers\": 3}\n</code></pre>"},{"location":"LOGGING/#request-execution","title":"Request Execution","text":"<pre><code>DEBUG   Sending HTTP request    {\"endpoint\": \"https://api.example.com/events\", \"timeout\": \"30s\"}\nDEBUG   Received HTTP response    {\"status_code\": 200, \"status\": \"200 OK\", \"request_duration\": \"150ms\", \"content_length\": 0}\nDEBUG   Successfully sent security event    {\"status_code\": 200, \"request_duration\": \"150ms\", \"json_size_bytes\": 1024}\n</code></pre>"},{"location":"LOGGING/#5-error-handling","title":"5. Error Handling","text":""},{"location":"LOGGING/#configuration-errors","title":"Configuration Errors","text":"<pre><code>ERROR   Invalid configuration for security event exporter    {\"error\": \"endpoint is required\"}\n</code></pre>"},{"location":"LOGGING/#conversion-errors","title":"Conversion Errors","text":"<pre><code>ERROR   Failed to convert log to security event    {\"error\": \"invalid log format\", \"resource_index\": 0, \"scope_index\": 0, \"log_index\": 5, \"severity\": \"ERROR\"}\n</code></pre>"},{"location":"LOGGING/#http-errors","title":"HTTP Errors","text":"<pre><code>ERROR   Failed to marshal security event to JSON    {\"error\": \"invalid character\", \"event_field_count\": 15}\nERROR   Failed to create HTTP request    {\"error\": \"invalid URL\", \"endpoint\": \"invalid-url\", \"method\": \"POST\"}\nERROR   Failed to send HTTP request    {\"error\": \"connection refused\", \"endpoint\": \"https://api.example.com/events\", \"request_duration\": \"5s\", \"timeout\": \"30s\"}\nERROR   HTTP request failed with non-success status    {\"status_code\": 401, \"status\": \"401 Unauthorized\", \"endpoint\": \"https://api.example.com/events\", \"request_duration\": \"100ms\"}\nERROR   HTTP error response body    {\"response_body\": \"{\\\"error\\\":\\\"Invalid API key\\\"}\"}\n</code></pre>"},{"location":"LOGGING/#debugging-tips","title":"Debugging Tips","text":""},{"location":"LOGGING/#1-enable-debug-logging","title":"1. Enable Debug Logging","text":"<p>For detailed debugging, set the log level to <code>debug</code>:</p> <pre><code>service:\n  telemetry:\n    logs:\n      level: debug\n</code></pre>"},{"location":"LOGGING/#2-monitor-batch-processing","title":"2. Monitor Batch Processing","text":"<p>Look for batch processing logs to understand throughput:</p> <pre><code>INFO    Completed processing logs batch    {\"total_resource_logs\": 5, \"total_log_records\": 50, \"successful_events\": 48, \"failed_events\": 2}\n</code></pre>"},{"location":"LOGGING/#3-check-http-performance","title":"3. Check HTTP Performance","text":"<p>Monitor request duration and response codes:</p> <pre><code>DEBUG   Received HTTP response    {\"status_code\": 200, \"status\": \"200 OK\", \"request_duration\": \"150ms\", \"content_length\": 0}\n</code></pre>"},{"location":"LOGGING/#4-verify-event-structure","title":"4. Verify Event Structure","text":"<p>Check the number of fields in generated security events:</p> <pre><code>DEBUG   Successfully converted log to security event    {\"event_field_count\": 15}\n</code></pre>"},{"location":"LOGGING/#5-monitor-error-rates","title":"5. Monitor Error Rates","text":"<p>Track failed events and their causes:</p> <pre><code>ERROR   Failed to send security event    {\"error\": \"connection timeout\", \"resource_index\": 0, \"scope_index\": 0, \"log_index\": 5, \"endpoint\": \"https://api.example.com/events\"}\n</code></pre>"},{"location":"LOGGING/#performance-considerations","title":"Performance Considerations","text":""},{"location":"LOGGING/#debug-logging-overhead","title":"Debug Logging Overhead","text":"<p>Debug logging can generate significant output and impact performance. Use it judiciously:</p> <ul> <li>Development/Testing: Use <code>debug</code> level for detailed troubleshooting</li> <li>Production: Use <code>info</code> level for operational monitoring</li> <li>High-throughput: Use <code>error</code> level to minimize overhead</li> </ul>"},{"location":"LOGGING/#log-volume","title":"Log Volume","text":"<p>Debug logging can generate large volumes of logs. Consider:</p> <ul> <li>Log rotation and retention policies</li> <li>Centralized log aggregation</li> <li>Filtering specific log categories if needed</li> </ul>"},{"location":"LOGGING/#security-considerations","title":"Security Considerations","text":""},{"location":"LOGGING/#sensitive-information","title":"Sensitive Information","text":"<p>The exporter identifies sensitive headers and logs them appropriately:</p> <pre><code>DEBUG   Added custom header    {\"header_name\": \"Authorization\", \"is_sensitive\": true}\n</code></pre> <p>Sensitive headers include: - <code>Authorization</code> - <code>Cookie</code> - <code>X-API-Key</code> - <code>X-Auth-Token</code></p>"},{"location":"LOGGING/#log-sanitization","title":"Log Sanitization","text":"<ul> <li>Sensitive header values are not logged</li> <li>Long message bodies are truncated in debug logs</li> <li>JSON previews are limited to 200 characters</li> </ul>"},{"location":"LOGGING/#monitoring-and-alerting","title":"Monitoring and Alerting","text":""},{"location":"LOGGING/#key-metrics-to-monitor","title":"Key Metrics to Monitor","text":"<ol> <li>Processing Rate: <code>successful_events</code> vs <code>failed_events</code></li> <li>HTTP Performance: <code>request_duration</code> and <code>status_code</code></li> <li>Error Rate: Frequency of error logs</li> <li>Throughput: <code>total_log_records</code> per batch</li> </ol>"},{"location":"LOGGING/#alerting-rules","title":"Alerting Rules","text":"<p>Create alerts for: - High error rates - HTTP failures (4xx/5xx status codes) - Long request durations - Processing failures</p>"},{"location":"LOGGING/#log-aggregation","title":"Log Aggregation","text":"<p>Consider using log aggregation tools like: - ELK Stack (Elasticsearch, Logstash, Kibana) - Splunk - Grafana Loki - Fluentd</p>"},{"location":"LOGGING/#troubleshooting-common-issues","title":"Troubleshooting Common Issues","text":""},{"location":"LOGGING/#1-high-error-rates","title":"1. High Error Rates","text":"<p>Check for: - Invalid endpoint URLs - Authentication failures - Network connectivity issues - Rate limiting</p>"},{"location":"LOGGING/#2-slow-performance","title":"2. Slow Performance","text":"<p>Monitor: - HTTP request duration - JSON marshaling time - Network latency - Endpoint response times</p>"},{"location":"LOGGING/#3-missing-events","title":"3. Missing Events","text":"<p>Verify: - Log processing counts - Event conversion success - HTTP delivery success - Configuration validation</p>"},{"location":"LOGGING/#4-memory-issues","title":"4. Memory Issues","text":"<p>Watch for: - Large JSON payloads - High batch sizes - Memory usage in logs - Garbage collection patterns</p>"},{"location":"METRICS/","title":"Telemetry Metrics Guide","text":"<p>The Security Event Exporter provides comprehensive telemetry metrics to monitor its performance and operational status. These metrics help you understand the exporter's behavior, identify potential issues, and optimize performance.</p>"},{"location":"METRICS/#metrics-overview","title":"Metrics Overview","text":"<p>The exporter tracks the following key metrics:</p>"},{"location":"METRICS/#core-metrics","title":"Core Metrics","text":"Metric Description Type <code>logs_received</code> Total number of log records received from the OpenTelemetry Collector Counter <code>events_exported</code> Total number of security events successfully exported Counter <code>events_failed</code> Total number of security events that failed to be exported Counter <code>conversion_errors</code> Total number of log records that failed to convert to security events Counter"},{"location":"METRICS/#http-communication-metrics","title":"HTTP Communication Metrics","text":"Metric Description Type <code>http_requests</code> Total number of HTTP requests sent to the security event endpoint Counter <code>http_errors</code> Total number of HTTP requests that failed Counter <code>http_durations</code> Array of HTTP request durations for performance analysis Histogram"},{"location":"METRICS/#metrics-collection","title":"Metrics Collection","text":""},{"location":"METRICS/#log-based-metrics","title":"Log-Based Metrics","text":"<p>All metrics are currently reported through structured logging. The exporter logs metrics at key lifecycle events:</p>"},{"location":"METRICS/#startup-metrics","title":"Startup Metrics","text":"<pre><code>{\n  \"level\": \"debug\",\n  \"msg\": \"Initialized telemetry metrics\",\n  \"logs_received\": 0,\n  \"events_exported\": 0,\n  \"events_failed\": 0,\n  \"conversion_errors\": 0,\n  \"http_requests\": 0,\n  \"http_errors\": 0\n}\n</code></pre>"},{"location":"METRICS/#batch-processing-metrics","title":"Batch Processing Metrics","text":"<pre><code>{\n  \"level\": \"info\",\n  \"msg\": \"Completed processing logs batch\",\n  \"total_resource_logs\": 5,\n  \"total_log_records\": 50,\n  \"successful_events\": 48,\n  \"failed_events\": 2,\n  \"http_requests\": 1\n}\n</code></pre>"},{"location":"METRICS/#shutdown-metrics","title":"Shutdown Metrics","text":"<pre><code>{\n  \"level\": \"info\",\n  \"msg\": \"Final telemetry metrics\",\n  \"logs_received\": 1000,\n  \"events_exported\": 950,\n  \"events_failed\": 50,\n  \"conversion_errors\": 25,\n  \"http_requests\": 20,\n  \"http_errors\": 5,\n  \"http_duration_samples\": 20\n}\n</code></pre>"},{"location":"METRICS/#performance-metrics","title":"Performance Metrics","text":"<pre><code>{\n  \"level\": \"info\",\n  \"msg\": \"HTTP request performance metrics\",\n  \"average_duration\": \"150ms\",\n  \"sample_count\": 20\n}\n</code></pre>"},{"location":"METRICS/#batching-behavior","title":"Batching Behavior","text":"<p>The exporter implements intelligent batching to optimize HTTP requests:</p> <ul> <li>Batch Collection: All log records from a single batch are collected and converted to security events</li> <li>Single HTTP Request: All security events in a batch are sent in a single HTTP POST request as a JSON array</li> <li>Efficient Processing: This reduces the number of HTTP requests and improves overall throughput</li> </ul>"},{"location":"METRICS/#batch-metrics-example","title":"Batch Metrics Example","text":"<pre><code>{\n  \"level\": \"debug\",\n  \"msg\": \"Sending batch of security events\",\n  \"event_count\": 25,\n  \"endpoint\": \"https://api.example.com/security-events\"\n}\n</code></pre>"},{"location":"METRICS/#monitoring-and-alerting","title":"Monitoring and Alerting","text":""},{"location":"METRICS/#key-metrics-to-monitor","title":"Key Metrics to Monitor","text":"<ol> <li>Success Rate: <code>events_exported / (events_exported + events_failed)</code></li> <li>Conversion Rate: <code>events_exported / logs_received</code></li> <li>HTTP Error Rate: <code>http_errors / http_requests</code></li> <li>Average Response Time: Average of <code>http_durations</code></li> </ol>"},{"location":"METRICS/#recommended-alerts","title":"Recommended Alerts","text":"<pre><code># Example alerting rules\nalerts:\n  - name: HighFailureRate\n    condition: events_failed / (events_exported + events_failed) &gt; 0.1\n    message: \"Security event exporter failure rate is above 10%\"\n\n  - name: HighHTTPErrorRate\n    condition: http_errors / http_requests &gt; 0.05\n    message: \"HTTP error rate is above 5%\"\n\n  - name: SlowResponseTime\n    condition: average_duration &gt; \"5s\"\n    message: \"Average HTTP response time is above 5 seconds\"\n</code></pre>"},{"location":"METRICS/#performance-optimization","title":"Performance Optimization","text":""},{"location":"METRICS/#metrics-driven-optimization","title":"Metrics-Driven Optimization","text":"<p>Use the collected metrics to optimize exporter performance:</p> <ol> <li>Batch Size Analysis: Monitor <code>events_exported</code> per <code>http_requests</code> to understand batching efficiency</li> <li>Error Pattern Analysis: Analyze <code>conversion_errors</code> and <code>http_errors</code> to identify problematic log patterns</li> <li>Response Time Analysis: Use <code>http_durations</code> to identify performance bottlenecks</li> </ol>"},{"location":"METRICS/#configuration-tuning","title":"Configuration Tuning","text":"<p>Based on metrics analysis, you can tune:</p> <ul> <li>Timeout Settings: Adjust HTTP timeout based on response time patterns</li> <li>Retry Settings: Configure retry behavior based on error rates</li> <li>Batch Processing: Optimize batch sizes based on throughput requirements</li> </ul>"},{"location":"METRICS/#integration-with-monitoring-systems","title":"Integration with Monitoring Systems","text":""},{"location":"METRICS/#prometheus-integration","title":"Prometheus Integration","text":"<p>While the current implementation uses logging, you can integrate with Prometheus by:</p> <ol> <li>Parsing the structured logs</li> <li>Extracting metrics from log entries</li> <li>Converting to Prometheus metrics format</li> </ol>"},{"location":"METRICS/#example-log-parser","title":"Example Log Parser","text":"<pre><code># Extract metrics from logs\ngrep \"Final telemetry metrics\" collector.logs | \\\njq -r '.logs_received, .events_exported, .events_failed' | \\\nawk '{print \"security_event_exporter_logs_received_total \" $1; print \"security_event_exporter_events_exported_total \" $2; print \"security_event_exporter_events_failed_total \" $3}'\n</code></pre>"},{"location":"METRICS/#troubleshooting","title":"Troubleshooting","text":""},{"location":"METRICS/#common-issues-and-metrics","title":"Common Issues and Metrics","text":"<ol> <li>High Conversion Errors: Check log format compatibility</li> <li>High HTTP Errors: Verify endpoint configuration and network connectivity</li> <li>Slow Response Times: Analyze endpoint performance and network conditions</li> <li>Low Success Rate: Investigate both conversion and HTTP errors</li> </ol>"},{"location":"METRICS/#debug-mode","title":"Debug Mode","text":"<p>Enable debug logging to get detailed metrics information:</p> <pre><code>service:\n  telemetry:\n    logs:\n      level: debug\n</code></pre> <p>This provides detailed metrics at each processing step, helping identify bottlenecks and issues.</p>"},{"location":"METRICS/#future-enhancements","title":"Future Enhancements","text":"<p>Planned enhancements for metrics collection:</p> <ol> <li>Native Prometheus Metrics: Direct integration with Prometheus metrics</li> <li>Real-time Metrics: Live metrics dashboard</li> <li>Custom Metrics: User-defined metrics for specific use cases</li> <li>Metrics Export: Export metrics to external processors</li> </ol>"},{"location":"deployment/docker-deployment/","title":"Docker Deployment","text":"<p>Deploy the Security Event Exporter using Docker for containerized environments.</p>"},{"location":"deployment/docker-deployment/#quick-start","title":"Quick Start","text":""},{"location":"deployment/docker-deployment/#basic-deployment","title":"Basic Deployment","text":"<pre><code># Run the collector with default configuration\ndocker run -d \\\n  --name otel-security-exporter \\\n  -p 4317:4317 \\\n  -p 8888:8888 \\\n  -p 13133:13133 \\\n  hrexed/otel-collector-sec-event:latest\n</code></pre>"},{"location":"deployment/docker-deployment/#custom-configuration","title":"Custom Configuration","text":"<pre><code># Run with custom configuration file\ndocker run -d \\\n  --name otel-security-exporter \\\n  -p 4317:4317 \\\n  -p 8888:8888 \\\n  -p 13133:13133 \\\n  -v $(pwd)/config.yaml:/otel/config.yaml \\\n  hrexed/otel-collector-sec-event:latest \\\n  --config /otel/config.yaml\n</code></pre>"},{"location":"deployment/docker-deployment/#deployment-architecture","title":"Deployment Architecture","text":"<pre><code>graph TB\n    subgraph \"Host System\"\n        A[Docker Engine]\n        B[Container Network]\n        C[Volume Mounts]\n    end\n\n    subgraph \"Container\"\n        D[OTEL Collector]\n        E[Security Event Exporter]\n        F[Configuration]\n    end\n\n    subgraph \"External Systems\"\n        G[Log Sources]\n        H[Security API]\n        I[Monitoring]\n    end\n\n    A --&gt; D\n    B --&gt; D\n    C --&gt; F\n\n    G --&gt; D\n    D --&gt; E\n    E --&gt; H\n    E --&gt; I\n\n    style D fill:#e3f2fd\n    style E fill:#ff9999\n    style H fill:#c8e6c9</code></pre>"},{"location":"deployment/docker-deployment/#configuration-options","title":"Configuration Options","text":""},{"location":"deployment/docker-deployment/#environment-variables","title":"Environment Variables","text":"<pre><code>docker run -d \\\n  --name otel-security-exporter \\\n  -p 4317:4317 \\\n  -p 8888:8888 \\\n  -e OTEL_SECURITY_ENDPOINT=\"https://api.example.com/events\" \\\n  -e OTEL_SECURITY_API_TOKEN=\"your-token\" \\\n  -e OTEL_SECURITY_TIMEOUT=\"30s\" \\\n  hrexed/otel-collector-sec-event:latest\n</code></pre>"},{"location":"deployment/docker-deployment/#configuration-file-mount","title":"Configuration File Mount","text":"<pre><code># Create configuration directory\nmkdir -p ./otel-config\n\n# Create configuration file\ncat &gt; ./otel-config/config.yaml &lt;&lt; 'EOF'\nreceivers:\n  otlp:\n    protocols:\n      grpc:\n        endpoint: 0.0.0.0:4317\n      http:\n        endpoint: 0.0.0.0:4318\n\nprocessors:\n  batch:\n\nexporters:\n  securityevent:\n    endpoint: https://api.example.com/security-events\n    headers:\n      authorization: \"Bearer your-api-token\"\n    default_attributes:\n      source: \"docker-deployment\"\n      environment: \"production\"\n\nservice:\n  pipelines:\n    logs:\n      receivers: [otlp]\n      processors: [batch]\n      exporters: [securityevent]\nEOF\n\n# Run with mounted configuration\ndocker run -d \\\n  --name otel-security-exporter \\\n  -p 4317:4317 \\\n  -p 8888:8888 \\\n  -v $(pwd)/otel-config:/otel/config \\\n  hrexed/otel-collector-sec-event:latest \\\n  --config /otel/config/config.yaml\n</code></pre>"},{"location":"deployment/docker-deployment/#production-deployment","title":"Production Deployment","text":""},{"location":"deployment/docker-deployment/#high-availability-setup","title":"High Availability Setup","text":"<pre><code>graph TB\n    subgraph \"Load Balancer\"\n        A[HAProxy/Nginx]\n    end\n\n    subgraph \"Container Instances\"\n        B[Instance 1]\n        C[Instance 2]\n        D[Instance N]\n    end\n\n    subgraph \"Shared Storage\"\n        E[Config Volume]\n        F[Log Volume]\n    end\n\n    A --&gt; B\n    A --&gt; C\n    A --&gt; D\n\n    B --&gt; E\n    C --&gt; E\n    D --&gt; E\n\n    B --&gt; F\n    C --&gt; F\n    D --&gt; F\n\n    style A fill:#fff3e0\n    style E fill:#e3f2fd\n    style F fill:#f3e5f5</code></pre>"},{"location":"deployment/docker-deployment/#docker-compose-deployment","title":"Docker Compose Deployment","text":"<pre><code>version: '3.8'\n\nservices:\n  otel-security-exporter:\n    image: hrexed/otel-collector-sec-event:latest\n    container_name: otel-security-exporter\n    ports:\n      - \"4317:4317\"\n      - \"4318:4318\"\n      - \"8888:8888\"\n      - \"13133:13133\"\n    volumes:\n      - ./config:/otel/config\n      - ./logs:/otel/logs\n    environment:\n      - OTEL_SECURITY_ENDPOINT=https://api.example.com/events\n      - OTEL_SECURITY_API_TOKEN=${SECURITY_API_TOKEN}\n    restart: unless-stopped\n    healthcheck:\n      test: [\"CMD\", \"wget\", \"--no-verbose\", \"--tries=1\", \"--spider\", \"http://localhost:13133/\"]\n      interval: 30s\n      timeout: 30s\n      retries: 3\n      start_period: 5s\n    networks:\n      - otel-network\n\nnetworks:\n  otel-network:\n    driver: bridge\n</code></pre>"},{"location":"deployment/docker-deployment/#resource-limits","title":"Resource Limits","text":"<pre><code>version: '3.8'\n\nservices:\n  otel-security-exporter:\n    image: hrexed/otel-collector-sec-event:latest\n    container_name: otel-security-exporter\n    ports:\n      - \"4317:4317\"\n      - \"8888:8888\"\n    volumes:\n      - ./config:/otel/config\n    environment:\n      - OTEL_SECURITY_ENDPOINT=https://api.example.com/events\n    deploy:\n      resources:\n        limits:\n          cpus: '2.0'\n          memory: 2G\n        reservations:\n          cpus: '0.5'\n          memory: 512M\n    restart: unless-stopped\n</code></pre>"},{"location":"deployment/docker-deployment/#security-configuration","title":"Security Configuration","text":""},{"location":"deployment/docker-deployment/#network-security","title":"Network Security","text":"<pre><code>graph TB\n    subgraph \"Container Network\"\n        A[OTEL Collector]\n        B[Security Event Exporter]\n    end\n\n    subgraph \"External Network\"\n        C[Security API]\n        D[Monitoring]\n    end\n\n    subgraph \"Internal Network\"\n        E[Log Sources]\n    end\n\n    E --&gt; A\n    A --&gt; B\n    B --&gt; C\n    B --&gt; D\n\n    style A fill:#e3f2fd\n    style B fill:#ff9999\n    style C fill:#c8e6c9</code></pre>"},{"location":"deployment/docker-deployment/#tls-configuration","title":"TLS Configuration","text":"<pre><code>exporters:\n  securityevent:\n    endpoint: https://api.example.com/security-events\n    headers:\n      authorization: \"Bearer your-api-token\"\n    tls:\n      insecure: false\n      cert_file: /otel/certs/client.crt\n      key_file: /otel/certs/client.key\n      ca_file: /otel/certs/ca.crt\n</code></pre>"},{"location":"deployment/docker-deployment/#secrets-management","title":"Secrets Management","text":"<pre><code># Using Docker secrets\necho \"your-api-token\" | docker secret create security_api_token -\n\n# Run with secrets\ndocker run -d \\\n  --name otel-security-exporter \\\n  -p 4317:4317 \\\n  -p 8888:8888 \\\n  --secret security_api_token \\\n  hrexed/otel-collector-sec-event:latest\n</code></pre>"},{"location":"deployment/docker-deployment/#monitoring-and-logging","title":"Monitoring and Logging","text":""},{"location":"deployment/docker-deployment/#log-configuration","title":"Log Configuration","text":"<pre><code>service:\n  telemetry:\n    logs:\n      level: info\n      output_paths: [\"/otel/logs/collector.log\"]\n    metrics:\n      address: 0.0.0.0:8888\n</code></pre>"},{"location":"deployment/docker-deployment/#health-checks","title":"Health Checks","text":"<pre><code># Check container health\ndocker ps --format \"table {{.Names}}\\t{{.Status}}\"\n\n# Check collector health\ncurl http://localhost:13133/\n\n# Check metrics\ncurl http://localhost:8888/metrics\n</code></pre>"},{"location":"deployment/docker-deployment/#log-monitoring","title":"Log Monitoring","text":"<pre><code># View logs\ndocker logs otel-security-exporter\n\n# Follow logs\ndocker logs -f otel-security-exporter\n\n# View specific log patterns\ndocker logs otel-security-exporter | grep \"security_event\"\n</code></pre>"},{"location":"deployment/docker-deployment/#scaling-and-performance","title":"Scaling and Performance","text":""},{"location":"deployment/docker-deployment/#horizontal-scaling","title":"Horizontal Scaling","text":"<pre><code>graph TB\n    subgraph \"Load Balancer\"\n        A[HAProxy]\n    end\n\n    subgraph \"Container Cluster\"\n        B[Container 1]\n        C[Container 2]\n        D[Container 3]\n        E[Container N]\n    end\n\n    A --&gt; B\n    A --&gt; C\n    A --&gt; D\n    A --&gt; E\n\n    style A fill:#fff3e0\n    style B fill:#e3f2fd\n    style C fill:#e3f2fd\n    style D fill:#e3f2fd\n    style E fill:#e3f2fd</code></pre>"},{"location":"deployment/docker-deployment/#performance-tuning","title":"Performance Tuning","text":"<pre><code># High throughput configuration\nprocessors:\n  batch:\n    timeout: 5s\n    send_batch_size: 1000\n    send_batch_max_size: 2000\n\nexporters:\n  securityevent:\n    endpoint: https://api.example.com/events\n    timeout: 30s\n    headers:\n      authorization: \"Bearer token\"\n</code></pre>"},{"location":"deployment/docker-deployment/#resource-monitoring","title":"Resource Monitoring","text":"<pre><code># Monitor container resources\ndocker stats otel-security-exporter\n\n# Monitor specific metrics\ndocker exec otel-security-exporter wget -qO- http://localhost:8888/metrics | grep security_event\n</code></pre>"},{"location":"deployment/docker-deployment/#troubleshooting","title":"Troubleshooting","text":""},{"location":"deployment/docker-deployment/#common-issues","title":"Common Issues","text":"<ol> <li> <p>Container won't start <pre><code># Check container logs\ndocker logs otel-security-exporter\n\n# Check configuration\ndocker exec otel-security-exporter cat /otel/config.yaml\n</code></pre></p> </li> <li> <p>Port conflicts <pre><code># Check port usage\nnetstat -tulpn | grep :4317\n\n# Use different ports\ndocker run -p 4318:4317 otel-security-exporter\n</code></pre></p> </li> <li> <p>Configuration errors <pre><code># Validate configuration\ndocker exec otel-security-exporter /otel/otelcol-security --config /otel/config.yaml --dry-run\n</code></pre></p> </li> </ol>"},{"location":"deployment/docker-deployment/#debug-mode","title":"Debug Mode","text":"<pre><code># Run with debug logging\ndocker run -d \\\n  --name otel-security-exporter \\\n  -p 4317:4317 \\\n  -p 8888:8888 \\\n  -e OTEL_LOG_LEVEL=debug \\\n  hrexed/otel-collector-sec-event:latest\n</code></pre>"},{"location":"deployment/docker-deployment/#performance-debugging","title":"Performance Debugging","text":"<pre><code># Monitor container performance\ndocker exec otel-security-exporter top\n\n# Check network connectivity\ndocker exec otel-security-exporter wget -qO- https://api.example.com/health\n\n# Monitor logs for performance metrics\ndocker logs otel-security-exporter | grep \"performance\"\n</code></pre>"},{"location":"deployment/docker-deployment/#backup-and-recovery","title":"Backup and Recovery","text":""},{"location":"deployment/docker-deployment/#configuration-backup","title":"Configuration Backup","text":"<pre><code># Backup configuration\ndocker cp otel-security-exporter:/otel/config.yaml ./config-backup.yaml\n\n# Backup logs\ndocker cp otel-security-exporter:/otel/logs ./logs-backup/\n</code></pre>"},{"location":"deployment/docker-deployment/#container-backup","title":"Container Backup","text":"<pre><code># Create container image\ndocker commit otel-security-exporter otel-security-exporter:backup\n\n# Save container image\ndocker save otel-security-exporter:backup &gt; otel-backup.tar\n</code></pre>"},{"location":"deployment/docker-deployment/#recovery","title":"Recovery","text":"<pre><code># Restore from backup\ndocker load &lt; otel-backup.tar\n\n# Run restored container\ndocker run -d \\\n  --name otel-security-exporter-restored \\\n  -p 4317:4317 \\\n  -p 8888:8888 \\\n  otel-security-exporter:backup\n</code></pre>"},{"location":"deployment/docker-deployment/#updates-and-maintenance","title":"Updates and Maintenance","text":""},{"location":"deployment/docker-deployment/#rolling-updates","title":"Rolling Updates","text":"<pre><code># Pull latest image\ndocker pull hrexed/otel-collector-sec-event:latest\n\n# Stop current container\ndocker stop otel-security-exporter\n\n# Remove old container\ndocker rm otel-security-exporter\n\n# Start new container\ndocker run -d \\\n  --name otel-security-exporter \\\n  -p 4317:4317 \\\n  -p 8888:8888 \\\n  hrexed/otel-collector-sec-event:latest\n</code></pre>"},{"location":"deployment/docker-deployment/#maintenance-tasks","title":"Maintenance Tasks","text":"<pre><code># Clean up old containers\ndocker container prune\n\n# Clean up old images\ndocker image prune\n\n# Clean up volumes\ndocker volume prune\n</code></pre>"},{"location":"features/architecture/","title":"Architecture","text":"<p>The Security Event Exporter is designed as a custom component for the OpenTelemetry Collector, providing efficient log-to-security-event transformation and HTTP delivery.</p>"},{"location":"features/architecture/#system-architecture","title":"System Architecture","text":"<pre><code>graph TB\n    subgraph \"Log Sources\"\n        A[Applications]\n        B[System Logs]\n        C[Security Tools]\n        D[Network Devices]\n    end\n\n    subgraph \"OpenTelemetry Collector\"\n        E[Receivers]\n        F[Processors]\n        G[Security Event Exporter]\n    end\n\n    subgraph \"Security Event Processing\"\n        H[Log Records]\n        I[Event Conversion]\n        J[Event Batching]\n        K[HTTP Client]\n    end\n\n    subgraph \"External Systems\"\n        L[SIEM Platform]\n        M[Security API]\n        N[Event Store]\n    end\n\n    A --&gt; E\n    B --&gt; E\n    C --&gt; E\n    D --&gt; E\n\n    E --&gt; F\n    F --&gt; G\n\n    G --&gt; H\n    H --&gt; I\n    I --&gt; J\n    J --&gt; K\n\n    K --&gt; L\n    K --&gt; M\n    K --&gt; N\n\n    style G fill:#ff9999\n    style H fill:#99ccff\n    style I fill:#99ccff\n    style J fill:#99ccff\n    style K fill:#99ccff</code></pre>"},{"location":"features/architecture/#component-architecture","title":"Component Architecture","text":"<pre><code>graph TD\n    subgraph \"Security Event Exporter\"\n        A[Config]\n        B[Logs Consumer]\n        C[Event Converter]\n        D[Event Batcher]\n        E[HTTP Client]\n        F[Telemetry Metrics]\n    end\n\n    subgraph \"External Dependencies\"\n        G[HTTP Endpoint]\n        H[Logger]\n        I[Metrics Store]\n    end\n\n    A --&gt; B\n    A --&gt; C\n    A --&gt; E\n\n    B --&gt; C\n    C --&gt; D\n    D --&gt; E\n\n    B --&gt; F\n    C --&gt; F\n    D --&gt; F\n    E --&gt; F\n\n    E --&gt; G\n    F --&gt; H\n    F --&gt; I\n\n    style A fill:#ffeb3b\n    style B fill:#4caf50\n    style C fill:#2196f3\n    style D fill:#ff9800\n    style E fill:#f44336\n    style F fill:#9c27b0</code></pre>"},{"location":"features/architecture/#data-flow","title":"Data Flow","text":"<pre><code>sequenceDiagram\n    participant App as Application\n    participant OTLP as OTLP Receiver\n    participant Batch as Batch Processor\n    participant SecExp as Security Event Exporter\n    participant Conv as Event Converter\n    participant Batcher as Event Batcher\n    participant HTTP as HTTP Client\n    participant API as Security API\n\n    App-&gt;&gt;OTLP: Send Logs\n    OTLP-&gt;&gt;Batch: Process Logs\n    Batch-&gt;&gt;SecExp: Consume Logs\n\n    SecExp-&gt;&gt;Conv: Convert Log to Event\n    Conv-&gt;&gt;SecExp: Return Security Event\n\n    SecExp-&gt;&gt;Batcher: Add Event to Batch\n    Batcher-&gt;&gt;SecExp: Batch Ready\n\n    SecExp-&gt;&gt;HTTP: Send Event Batch\n    HTTP-&gt;&gt;API: POST JSON Array\n    API-&gt;&gt;HTTP: HTTP Response\n    HTTP-&gt;&gt;SecExp: Success/Error\n\n    SecExp-&gt;&gt;SecExp: Update Metrics</code></pre>"},{"location":"features/architecture/#event-processing-pipeline","title":"Event Processing Pipeline","text":"<pre><code>graph LR\n    subgraph \"Input Processing\"\n        A[Log Records] --&gt; B[Resource Attributes]\n        B --&gt; C[Log Attributes]\n        C --&gt; D[Log Body]\n    end\n\n    subgraph \"Event Creation\"\n        E[Default Attributes] --&gt; F[Event Assembly]\n        D --&gt; F\n        C --&gt; F\n        B --&gt; F\n    end\n\n    subgraph \"Batch Processing\"\n        F --&gt; G[Event Collection]\n        G --&gt; H[Batch Assembly]\n        H --&gt; I[JSON Serialization]\n    end\n\n    subgraph \"HTTP Delivery\"\n        I --&gt; J[HTTP Request]\n        J --&gt; K[Response Processing]\n        K --&gt; L[Metrics Update]\n    end\n\n    style A fill:#e1f5fe\n    style F fill:#f3e5f5\n    style H fill:#fff3e0\n    style J fill:#ffebee</code></pre>"},{"location":"features/architecture/#telemetry-metrics-flow","title":"Telemetry Metrics Flow","text":"<pre><code>graph TD\n    subgraph \"Metrics Collection\"\n        A[Logs Received] --&gt; B[Conversion Success]\n        B --&gt; C[Events Exported]\n        B --&gt; D[Conversion Errors]\n\n        E[HTTP Requests] --&gt; F[HTTP Success]\n        E --&gt; G[HTTP Errors]\n\n        H[Request Duration] --&gt; I[Performance Metrics]\n    end\n\n    subgraph \"Metrics Reporting\"\n        C --&gt; J[Structured Logging]\n        D --&gt; J\n        F --&gt; J\n        G --&gt; J\n        I --&gt; J\n    end\n\n    subgraph \"Monitoring Systems\"\n        J --&gt; K[Log Aggregation]\n        K --&gt; L[Alerting]\n        K --&gt; M[Dashboards]\n    end\n\n    style A fill:#4caf50\n    style C fill:#4caf50\n    style D fill:#f44336\n    style G fill:#f44336\n    style J fill:#2196f3</code></pre>"},{"location":"features/architecture/#configuration-architecture","title":"Configuration Architecture","text":"<pre><code>graph TB\n    subgraph \"Configuration Sources\"\n        A[YAML Config File]\n        B[Environment Variables]\n        C[Command Line Args]\n    end\n\n    subgraph \"Configuration Processing\"\n        D[Config Parser]\n        E[Validation]\n        F[Default Values]\n    end\n\n    subgraph \"Runtime Configuration\"\n        G[Endpoint Settings]\n        H[Header Configuration]\n        I[Retry Settings]\n        J[Queue Settings]\n        K[Default Attributes]\n    end\n\n    A --&gt; D\n    B --&gt; D\n    C --&gt; D\n\n    D --&gt; E\n    E --&gt; F\n    F --&gt; G\n    F --&gt; H\n    F --&gt; I\n    F --&gt; J\n    F --&gt; K\n\n    style A fill:#e8f5e8\n    style D fill:#fff3cd\n    style G fill:#d1ecf1</code></pre>"},{"location":"features/architecture/#error-handling-architecture","title":"Error Handling Architecture","text":"<pre><code>graph TD\n    subgraph \"Error Categories\"\n        A[Configuration Errors]\n        B[Conversion Errors]\n        C[HTTP Errors]\n        D[Network Errors]\n    end\n\n    subgraph \"Error Handling\"\n        E[Error Detection]\n        F[Error Classification]\n        G[Error Logging]\n        H[Error Metrics]\n        I[Retry Logic]\n    end\n\n    subgraph \"Recovery Actions\"\n        J[Configuration Validation]\n        K[Event Skipping]\n        L[HTTP Retry]\n        M[Circuit Breaker]\n    end\n\n    A --&gt; E\n    B --&gt; E\n    C --&gt; E\n    D --&gt; E\n\n    E --&gt; F\n    F --&gt; G\n    F --&gt; H\n    F --&gt; I\n\n    G --&gt; J\n    H --&gt; K\n    I --&gt; L\n    L --&gt; M\n\n    style A fill:#ffcdd2\n    style B fill:#ffcdd2\n    style C fill:#ffcdd2\n    style D fill:#ffcdd2</code></pre>"},{"location":"features/architecture/#performance-characteristics","title":"Performance Characteristics","text":""},{"location":"features/architecture/#throughput","title":"Throughput","text":"<ul> <li>Batch Processing: Events are batched for efficient HTTP delivery</li> <li>Concurrent Processing: Multiple log records processed in parallel</li> <li>Memory Management: Efficient memory usage with streaming processing</li> </ul>"},{"location":"features/architecture/#latency","title":"Latency","text":"<ul> <li>Low Latency: Direct HTTP delivery without intermediate storage</li> <li>Configurable Timeouts: Adjustable HTTP timeouts for different environments</li> <li>Retry Logic: Built-in retry mechanism for transient failures</li> </ul>"},{"location":"features/architecture/#scalability","title":"Scalability","text":"<ul> <li>Horizontal Scaling: Multiple collector instances can be deployed</li> <li>Load Balancing: HTTP requests can be load balanced across endpoints</li> <li>Resource Efficiency: Minimal resource footprint with efficient processing</li> </ul>"},{"location":"features/architecture/#security-considerations","title":"Security Considerations","text":""},{"location":"features/architecture/#data-protection","title":"Data Protection","text":"<ul> <li>Secure Headers: Support for authentication headers and API tokens</li> <li>TLS Support: HTTPS endpoint support for encrypted communication</li> <li>Sensitive Data: Logging excludes sensitive header information</li> </ul>"},{"location":"features/architecture/#network-security","title":"Network Security","text":"<ul> <li>Firewall Friendly: Uses standard HTTP/HTTPS protocols</li> <li>Proxy Support: Compatible with corporate proxies and firewalls</li> <li>Network Isolation: Can be deployed in isolated network segments</li> </ul>"},{"location":"features/architecture/#deployment-patterns","title":"Deployment Patterns","text":""},{"location":"features/architecture/#single-instance","title":"Single Instance","text":"<pre><code>graph LR\n    A[Applications] --&gt; B[Single Collector]\n    B --&gt; C[Security Event Exporter]\n    C --&gt; D[Security API]</code></pre>"},{"location":"features/architecture/#high-availability","title":"High Availability","text":"<pre><code>graph TB\n    A[Applications] --&gt; B[Load Balancer]\n    B --&gt; C[Collector Instance 1]\n    B --&gt; D[Collector Instance 2]\n    B --&gt; E[Collector Instance N]\n\n    C --&gt; F[Security Event Exporter]\n    D --&gt; G[Security Event Exporter]\n    E --&gt; H[Security Event Exporter]\n\n    F --&gt; I[Security API]\n    G --&gt; I\n    H --&gt; I</code></pre>"},{"location":"features/architecture/#distributed-deployment","title":"Distributed Deployment","text":"<pre><code>graph TB\n    subgraph \"Region A\"\n        A1[Apps] --&gt; B1[Collector]\n        B1 --&gt; C1[Security Event Exporter]\n    end\n\n    subgraph \"Region B\"\n        A2[Apps] --&gt; B2[Collector]\n        B2 --&gt; C2[Security Event Exporter]\n    end\n\n    C1 --&gt; D[Global Security API]\n    C2 --&gt; D</code></pre>"},{"location":"features/event-batching/","title":"Event Batching","text":"<p>The Security Event Exporter implements intelligent event batching to optimize HTTP requests and improve overall throughput. This feature reduces the number of HTTP calls while maintaining low latency and high reliability.</p>"},{"location":"features/event-batching/#batching-overview","title":"Batching Overview","text":"<pre><code>graph TD\n    subgraph \"Log Processing\"\n        A[Log Records] --&gt; B[Event Conversion]\n        B --&gt; C[Event Collection]\n    end\n\n    subgraph \"Batch Assembly\"\n        C --&gt; D[Batch Buffer]\n        D --&gt; E[Batch Ready]\n    end\n\n    subgraph \"HTTP Delivery\"\n        E --&gt; F[Single HTTP Request]\n        F --&gt; G[JSON Array Payload]\n        G --&gt; H[Security Endpoint]\n    end\n\n    style A fill:#e3f2fd\n    style D fill:#fff3e0\n    style F fill:#e8f5e8</code></pre>"},{"location":"features/event-batching/#how-batching-works","title":"How Batching Works","text":""},{"location":"features/event-batching/#1-log-collection-phase","title":"1. Log Collection Phase","text":"<pre><code>sequenceDiagram\n    participant Collector as OTEL Collector\n    participant Exporter as Security Event Exporter\n    participant Buffer as Batch Buffer\n    participant Converter as Event Converter\n\n    Collector-&gt;&gt;Exporter: ConsumeLogs(batch)\n    Exporter-&gt;&gt;Converter: Convert Log to Event\n    Converter-&gt;&gt;Exporter: Security Event\n    Exporter-&gt;&gt;Buffer: Add Event to Batch\n\n    loop For each log in batch\n        Exporter-&gt;&gt;Converter: Convert Log to Event\n        Converter-&gt;&gt;Exporter: Security Event\n        Exporter-&gt;&gt;Buffer: Add Event to Batch\n    end\n\n    Exporter-&gt;&gt;Buffer: Batch Complete</code></pre>"},{"location":"features/event-batching/#2-batch-assembly","title":"2. Batch Assembly","text":"<pre><code>graph LR\n    subgraph \"Event Collection\"\n        A[Event 1] --&gt; D[Batch Buffer]\n        B[Event 2] --&gt; D\n        C[Event N] --&gt; D\n    end\n\n    subgraph \"Batch Processing\"\n        D --&gt; E[Event Array]\n        E --&gt; F[JSON Serialization]\n        F --&gt; G[HTTP Request]\n    end\n\n    style D fill:#fff3e0\n    style E fill:#e8f5e8\n    style F fill:#f3e5f5</code></pre>"},{"location":"features/event-batching/#batching-benefits","title":"Batching Benefits","text":""},{"location":"features/event-batching/#performance-improvements","title":"Performance Improvements","text":"<pre><code>graph TB\n    subgraph \"Without Batching\"\n        A1[Log 1] --&gt; B1[HTTP Request 1]\n        A2[Log 2] --&gt; B2[HTTP Request 2]\n        A3[Log 3] --&gt; B3[HTTP Request 3]\n        A4[Log N] --&gt; B4[HTTP Request N]\n    end\n\n    subgraph \"With Batching\"\n        C1[Log 1] --&gt; D[Batch Buffer]\n        C2[Log 2] --&gt; D\n        C3[Log 3] --&gt; D\n        C4[Log N] --&gt; D\n        D --&gt; E[Single HTTP Request]\n    end\n\n    style B1 fill:#ffcdd2\n    style B2 fill:#ffcdd2\n    style B3 fill:#ffcdd2\n    style B4 fill:#ffcdd2\n    style E fill:#c8e6c9</code></pre>"},{"location":"features/event-batching/#resource-efficiency","title":"Resource Efficiency","text":"Aspect Without Batching With Batching Improvement HTTP Requests N requests 1 request N:1 ratio Network Overhead High Low Significant reduction Connection Pooling Inefficient Efficient Better utilization Throughput Limited High Substantial increase"},{"location":"features/event-batching/#batch-configuration","title":"Batch Configuration","text":""},{"location":"features/event-batching/#default-behavior","title":"Default Behavior","text":"<p>The exporter automatically batches all log records from a single <code>ConsumeLogs</code> call:</p> <pre><code>exporters:\n  securityevent:\n    endpoint: https://api.example.com/security-events\n    # Batching is automatic - no configuration needed\n</code></pre>"},{"location":"features/event-batching/#batch-size-limits","title":"Batch Size Limits","text":"<pre><code>graph TD\n    A[Log Batch from Collector] --&gt; B{Batch Size Check}\n    B --&gt;|Small Batch| C[Send Immediately]\n    B --&gt;|Large Batch| D[Split if Needed]\n    D --&gt; E[Send Multiple Batches]\n\n    style C fill:#c8e6c9\n    style E fill:#fff3e0</code></pre>"},{"location":"features/event-batching/#memory-management","title":"Memory Management","text":"<pre><code>graph LR\n    subgraph \"Memory Usage\"\n        A[Event Objects] --&gt; B[Batch Buffer]\n        B --&gt; C[JSON Serialization]\n        C --&gt; D[HTTP Request]\n        D --&gt; E[Memory Release]\n    end\n\n    style B fill:#e3f2fd\n    style E fill:#c8e6c9</code></pre>"},{"location":"features/event-batching/#json-payload-format","title":"JSON Payload Format","text":""},{"location":"features/event-batching/#single-event-format","title":"Single Event Format","text":"<pre><code>{\n  \"timestamp\": \"2024-01-15T10:30:00Z\",\n  \"severity\": \"ERROR\",\n  \"message\": \"Security event detected\",\n  \"resource.service.name\": \"my-service\",\n  \"attributes.user.id\": \"user123\"\n}\n</code></pre>"},{"location":"features/event-batching/#batched-events-format","title":"Batched Events Format","text":"<pre><code>[\n  {\n    \"timestamp\": \"2024-01-15T10:30:00Z\",\n    \"severity\": \"ERROR\",\n    \"message\": \"Security event detected\",\n    \"resource.service.name\": \"my-service\",\n    \"attributes.user.id\": \"user123\"\n  },\n  {\n    \"timestamp\": \"2024-01-15T10:30:01Z\",\n    \"severity\": \"WARN\",\n    \"message\": \"Suspicious activity\",\n    \"resource.service.name\": \"my-service\",\n    \"attributes.ip.address\": \"192.168.1.100\"\n  }\n]\n</code></pre>"},{"location":"features/event-batching/#error-handling-in-batches","title":"Error Handling in Batches","text":""},{"location":"features/event-batching/#batch-level-error-handling","title":"Batch-Level Error Handling","text":"<pre><code>graph TD\n    A[Batch Processing] --&gt; B{HTTP Success?}\n    B --&gt;|Yes| C[All Events Exported]\n    B --&gt;|No| D[All Events Failed]\n\n    D --&gt; E[Error Logging]\n    D --&gt; F[Metrics Update]\n    D --&gt; G[Retry Logic]\n\n    style C fill:#c8e6c9\n    style D fill:#ffcdd2</code></pre>"},{"location":"features/event-batching/#individual-event-errors","title":"Individual Event Errors","text":"<pre><code>graph TD\n    A[Event Conversion] --&gt; B{Conversion Success?}\n    B --&gt;|Yes| C[Add to Batch]\n    B --&gt;|No| D[Skip Event]\n\n    D --&gt; E[Log Error]\n    D --&gt; F[Update Metrics]\n\n    C --&gt; G[Continue Processing]\n\n    style C fill:#c8e6c9\n    style D fill:#fff3e0</code></pre>"},{"location":"features/event-batching/#performance-metrics","title":"Performance Metrics","text":""},{"location":"features/event-batching/#batch-metrics","title":"Batch Metrics","text":"<pre><code>graph LR\n    subgraph \"Batch Metrics\"\n        A[Events per Batch] --&gt; B[Batch Size Distribution]\n        C[Batch Processing Time] --&gt; D[Throughput Metrics]\n        E[HTTP Request Duration] --&gt; F[Performance Analysis]\n    end\n\n    style B fill:#e3f2fd\n    style D fill:#fff3e0\n    style F fill:#f3e5f5</code></pre>"},{"location":"features/event-batching/#monitoring-batch-performance","title":"Monitoring Batch Performance","text":"<pre><code># View batch metrics in logs\ndocker logs otel-security-exporter | grep \"batch\"\n\n# Example output:\n# INFO Completed processing logs batch {\"total_log_records\": 50, \"successful_events\": 48, \"failed_events\": 2, \"http_requests\": 1}\n</code></pre>"},{"location":"features/event-batching/#best-practices","title":"Best Practices","text":""},{"location":"features/event-batching/#1-optimal-batch-sizes","title":"1. Optimal Batch Sizes","text":"<pre><code>graph TB\n    A[Small Batches] --&gt; B[Low Latency]\n    C[Large Batches] --&gt; D[High Throughput]\n\n    E[Optimal Range] --&gt; F[Balanced Performance]\n\n    style B fill:#c8e6c9\n    style D fill:#fff3e0\n    style F fill:#e3f2fd</code></pre>"},{"location":"features/event-batching/#2-network-considerations","title":"2. Network Considerations","text":"<ul> <li>Bandwidth: Larger batches reduce network overhead</li> <li>Latency: Smaller batches provide lower latency</li> <li>Reliability: Batches provide atomic delivery</li> </ul>"},{"location":"features/event-batching/#3-memory-management","title":"3. Memory Management","text":"<pre><code>graph LR\n    A[Event Collection] --&gt; B[Memory Allocation]\n    B --&gt; C[Batch Assembly]\n    C --&gt; D[HTTP Transmission]\n    D --&gt; E[Memory Release]\n\n    style B fill:#fff3e0\n    style E fill:#c8e6c9</code></pre>"},{"location":"features/event-batching/#troubleshooting","title":"Troubleshooting","text":""},{"location":"features/event-batching/#common-issues","title":"Common Issues","text":"<ol> <li>Large Memory Usage: Monitor batch sizes and adjust collector configuration</li> <li>High Latency: Check network connectivity and endpoint performance</li> <li>Batch Failures: Verify endpoint configuration and authentication</li> </ol>"},{"location":"features/event-batching/#debug-mode","title":"Debug Mode","text":"<p>Enable debug logging to monitor batch behavior:</p> <pre><code>service:\n  telemetry:\n    logs:\n      level: debug\n</code></pre>"},{"location":"features/event-batching/#performance-tuning","title":"Performance Tuning","text":"<pre><code>graph TD\n    A[Monitor Metrics] --&gt; B[Identify Bottlenecks]\n    B --&gt; C[Adjust Configuration]\n    C --&gt; D[Test Performance]\n    D --&gt; E{Improved?}\n    E --&gt;|Yes| F[Deploy Changes]\n    E --&gt;|No| A\n\n    style F fill:#c8e6c9</code></pre>"},{"location":"features/event-batching/#configuration-examples","title":"Configuration Examples","text":""},{"location":"features/event-batching/#high-throughput-configuration","title":"High Throughput Configuration","text":"<pre><code>exporters:\n  securityevent:\n    endpoint: https://api.example.com/security-events\n    timeout: 30s\n    headers:\n      authorization: \"Bearer token\"\n    default_attributes:\n      source: \"high-throughput-collector\"\n\nprocessors:\n  batch:\n    timeout: 5s\n    send_batch_size: 1000\n    send_batch_max_size: 2000\n\nservice:\n  pipelines:\n    logs:\n      receivers: [otlp]\n      processors: [batch]\n      exporters: [securityevent]\n</code></pre>"},{"location":"features/event-batching/#low-latency-configuration","title":"Low Latency Configuration","text":"<pre><code>exporters:\n  securityevent:\n    endpoint: https://api.example.com/security-events\n    timeout: 5s\n    headers:\n      authorization: \"Bearer token\"\n\nprocessors:\n  batch:\n    timeout: 1s\n    send_batch_size: 10\n    send_batch_max_size: 50\n\nservice:\n  pipelines:\n    logs:\n      receivers: [otlp]\n      processors: [batch]\n      exporters: [securityevent]\n</code></pre>"},{"location":"features/security-event-format/","title":"Security Event Format","text":"<p>The Security Event Exporter transforms OpenTelemetry log records into structured security events in JSON format.</p>"},{"location":"features/security-event-format/#event-structure","title":"Event Structure","text":"<pre><code>{\n  \"timestamp\": \"2024-01-15T10:30:00Z\",\n  \"severity\": \"ERROR\",\n  \"severity_number\": 17,\n  \"message\": \"Security event detected: unauthorized access attempt\",\n  \"resource.service.name\": \"my-security-service\",\n  \"resource.service.version\": \"1.0.0\",\n  \"attributes.user.id\": \"user123\",\n  \"attributes.ip.address\": \"192.168.1.100\",\n  \"attributes.event.type\": \"authentication_failure\",\n  \"trace_id\": \"12345678901234567890123456789012\",\n  \"span_id\": \"1234567890123456\"\n}\n</code></pre>"},{"location":"features/security-event-format/#field-mapping","title":"Field Mapping","text":"Source Target Field Description Log timestamp <code>timestamp</code> ISO 8601 formatted timestamp Log severity <code>severity</code> Severity text (DEBUG, INFO, WARN, ERROR, FATAL) Log severity number <code>severity_number</code> Numeric severity level Log body <code>message</code> Log message content Resource attributes <code>resource.*</code> Prefixed with \"resource.\" Log attributes <code>attributes.*</code> Prefixed with \"attributes.\" Trace ID <code>trace_id</code> OpenTelemetry trace ID (if available) Span ID <code>span_id</code> OpenTelemetry span ID (if available) Default attributes Custom fields Added as-is from configuration"},{"location":"features/security-event-format/#event-types","title":"Event Types","text":""},{"location":"features/security-event-format/#authentication-events","title":"Authentication Events","text":"<pre><code>{\n  \"timestamp\": \"2024-01-15T10:30:00Z\",\n  \"severity\": \"ERROR\",\n  \"message\": \"Authentication failed for user\",\n  \"attributes.user.id\": \"user123\",\n  \"attributes.ip.address\": \"192.168.1.100\",\n  \"attributes.event.type\": \"authentication_failure\",\n  \"attributes.failure.reason\": \"invalid_password\"\n}\n</code></pre>"},{"location":"features/security-event-format/#authorization-events","title":"Authorization Events","text":"<pre><code>{\n  \"timestamp\": \"2024-01-15T10:30:00Z\",\n  \"severity\": \"WARN\",\n  \"message\": \"Access denied to resource\",\n  \"attributes.user.id\": \"user123\",\n  \"attributes.resource.path\": \"/admin/users\",\n  \"attributes.event.type\": \"authorization_failure\",\n  \"attributes.permission.required\": \"admin:users:read\"\n}\n</code></pre>"},{"location":"features/security-event-format/#network-security-events","title":"Network Security Events","text":"<pre><code>{\n  \"timestamp\": \"2024-01-15T10:30:00Z\",\n  \"severity\": \"ERROR\",\n  \"message\": \"Suspicious network activity detected\",\n  \"attributes.ip.address\": \"192.168.1.100\",\n  \"attributes.port\": 8080,\n  \"attributes.event.type\": \"network_intrusion\",\n  \"attributes.threat.level\": \"high\"\n}\n</code></pre>"},{"location":"getting-started/configuration/","title":"Configuration","text":"<p>Complete configuration guide for the Security Event Exporter.</p>"},{"location":"getting-started/configuration/#basic-configuration","title":"Basic Configuration","text":"<pre><code>exporters:\n  securityevent:\n    endpoint: https://api.example.com/security-events\n    headers:\n      authorization: \"Bearer your-api-token\"\n    default_attributes:\n      source: \"otel-collector\"\n      environment: \"production\"\n</code></pre>"},{"location":"getting-started/configuration/#configuration-options","title":"Configuration Options","text":"Option Type Required Default Description <code>endpoint</code> string Yes - HTTP endpoint for security events <code>timeout</code> duration No 30s HTTP request timeout <code>headers</code> map No {} Additional HTTP headers <code>default_attributes</code> map No {} Default attributes for all events <code>retry_on_failure</code> map No {} Retry configuration <code>sending_queue</code> map No {} Queue configuration"},{"location":"getting-started/configuration/#advanced-configuration","title":"Advanced Configuration","text":"<pre><code>exporters:\n  securityevent:\n    endpoint: https://api.example.com/security-events\n    timeout: 60s\n    headers:\n      authorization: \"Bearer your-api-token\"\n      content-type: \"application/json\"\n      x-api-version: \"v1\"\n    default_attributes:\n      source: \"otel-collector\"\n      environment: \"production\"\n      datacenter: \"us-east-1\"\n    retry_on_failure:\n      enabled: true\n      initial_interval: 5s\n      max_interval: 30s\n      max_elapsed_time: 5m\n    sending_queue:\n      enabled: true\n      num_consumers: 10\n      queue_size: 1000\n</code></pre>"},{"location":"getting-started/quick-start/","title":"Quick Start","text":"<p>Get up and running with the Security Event Exporter in minutes!</p>"},{"location":"getting-started/quick-start/#prerequisites","title":"Prerequisites","text":"<ul> <li>Docker or Podman</li> <li>Basic understanding of OpenTelemetry concepts</li> </ul>"},{"location":"getting-started/quick-start/#quick-start-with-docker","title":"\ud83d\ude80 Quick Start with Docker","text":""},{"location":"getting-started/quick-start/#1-run-the-collector","title":"1. Run the Collector","text":"<pre><code>docker run -d \\\n  --name otel-security-exporter \\\n  -p 4317:4317 \\\n  -p 8888:8888 \\\n  -p 13133:13133 \\\n  hrexed/otel-collector-sec-event:latest\n</code></pre>"},{"location":"getting-started/quick-start/#2-verify-the-collector-is-running","title":"2. Verify the Collector is Running","text":"<pre><code># Check collector health\ncurl http://localhost:13133/\n\n# Check metrics endpoint\ncurl http://localhost:8888/metrics\n</code></pre>"},{"location":"getting-started/quick-start/#3-send-test-logs","title":"3. Send Test Logs","text":"<pre><code>curl -X POST http://localhost:4317/v1/logs \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"resourceLogs\": [{\n      \"resource\": {\n        \"attributes\": [{\n          \"key\": \"service.name\",\n          \"value\": {\"stringValue\": \"my-security-service\"}\n        }]\n      },\n      \"scopeLogs\": [{\n        \"logRecords\": [{\n          \"body\": {\"stringValue\": \"Security event detected: unauthorized access attempt\"},\n          \"severityText\": \"ERROR\",\n          \"timestamp\": \"'$(date -u +%Y-%m-%dT%H:%M:%SZ)'\"\n        }]\n      }]\n    }]\n  }'\n</code></pre>"},{"location":"getting-started/quick-start/#configuration","title":"\ud83d\udccb Configuration","text":"<p>The collector comes with a default configuration that includes the Security Event Exporter. Here's a minimal configuration:</p> <pre><code>receivers:\n  otlp:\n    protocols:\n      grpc:\n        endpoint: 0.0.0.0:4317\n      http:\n        endpoint: 0.0.0.0:4318\n\nprocessors:\n  batch:\n\nexporters:\n  securityevent:\n    endpoint: https://your-security-endpoint.com/events\n    headers:\n      authorization: \"Bearer your-api-token\"\n    default_attributes:\n      source: \"otel-collector\"\n      environment: \"production\"\n\nservice:\n  pipelines:\n    logs:\n      receivers: [otlp]\n      processors: [batch]\n      exporters: [securityevent]\n</code></pre>"},{"location":"getting-started/quick-start/#custom-configuration","title":"\ud83d\udd27 Custom Configuration","text":""},{"location":"getting-started/quick-start/#using-a-custom-config-file","title":"Using a Custom Config File","text":"<pre><code>docker run -d \\\n  --name otel-security-exporter \\\n  -p 4317:4317 \\\n  -p 8888:8888 \\\n  -v $(pwd)/my-config.yaml:/otel/config.yaml \\\n  hrexed/otel-collector-sec-event:latest \\\n  --config /otel/config.yaml\n</code></pre>"},{"location":"getting-started/quick-start/#environment-variables","title":"Environment Variables","text":"<pre><code>docker run -d \\\n  --name otel-security-exporter \\\n  -p 4317:4317 \\\n  -p 8888:8888 \\\n  -e OTEL_SECURITY_ENDPOINT=\"https://your-endpoint.com/events\" \\\n  -e OTEL_SECURITY_API_TOKEN=\"your-token\" \\\n  hrexed/otel-collector-sec-event:latest\n</code></pre>"},{"location":"getting-started/quick-start/#monitoring","title":"\ud83d\udcca Monitoring","text":""},{"location":"getting-started/quick-start/#view-logs","title":"View Logs","text":"<pre><code># View collector logs\ndocker logs otel-security-exporter\n\n# Follow logs in real-time\ndocker logs -f otel-security-exporter\n</code></pre>"},{"location":"getting-started/quick-start/#check-metrics","title":"Check Metrics","text":"<pre><code># View telemetry metrics\ncurl http://localhost:8888/metrics | grep security_event\n</code></pre>"},{"location":"getting-started/quick-start/#testing","title":"\ud83e\uddea Testing","text":""},{"location":"getting-started/quick-start/#test-with-sample-data","title":"Test with Sample Data","text":"<pre><code># Create a test script\ncat &gt; test-logs.sh &lt;&lt; 'EOF'\n#!/bin/bash\n\nfor i in {1..10}; do\n  curl -X POST http://localhost:4317/v1/logs \\\n    -H \"Content-Type: application/json\" \\\n    -d \"{\n      \\\"resourceLogs\\\": [{\n        \\\"resource\\\": {\n          \\\"attributes\\\": [{\n            \\\"key\\\": \\\"service.name\\\",\n            \\\"value\\\": {\\\"stringValue\\\": \\\"test-service-$i\\\"}\n          }]\n        },\n        \\\"scopeLogs\\\": [{\n          \\\"logRecords\\\": [{\n            \\\"body\\\": {\\\"stringValue\\\": \\\"Test security event $i\\\"},\n            \\\"severityText\\\": \\\"INFO\\\",\n            \\\"timestamp\\\": \\\"$(date -u +%Y-%m-%dT%H:%M:%SZ)\\\"\n          }]\n        }]\n      }]\n    }\"\n  echo \"Sent test log $i\"\n  sleep 1\ndone\nEOF\n\nchmod +x test-logs.sh\n./test-logs.sh\n</code></pre>"},{"location":"getting-started/quick-start/#troubleshooting","title":"\ud83d\udd0d Troubleshooting","text":""},{"location":"getting-started/quick-start/#common-issues","title":"Common Issues","text":"<ol> <li>Collector won't start: Check port availability</li> <li>No logs being processed: Verify endpoint configuration</li> <li>HTTP errors: Check network connectivity and API tokens</li> </ol>"},{"location":"getting-started/quick-start/#debug-mode","title":"Debug Mode","text":"<p>Enable debug logging:</p> <pre><code>docker run -d \\\n  --name otel-security-exporter \\\n  -p 4317:4317 \\\n  -p 8888:8888 \\\n  hrexed/otel-collector-sec-event:latest \\\n  --set service.telemetry.logs.level=debug\n</code></pre>"},{"location":"getting-started/quick-start/#next-steps","title":"\ud83d\udcda Next Steps","text":"<ul> <li>Configuration Guide - Detailed configuration options</li> <li>Telemetry Metrics - Monitoring and metrics</li> <li>Deployment Guide - Production deployment</li> <li>API Reference - Complete API documentation</li> </ul>"},{"location":"getting-started/quick-start/#need-help","title":"\ud83c\udd98 Need Help?","text":"<ul> <li>Check the Troubleshooting Guide</li> <li>Join our GitHub Discussions</li> <li>Report issues on GitHub</li> </ul>"},{"location":"monitoring/telemetry-metrics/","title":"Telemetry Metrics","text":"<p>The Security Event Exporter provides comprehensive telemetry metrics to monitor its performance and operational status. These metrics help you understand the exporter's behavior, identify potential issues, and optimize performance.</p>"},{"location":"monitoring/telemetry-metrics/#metrics-overview","title":"Metrics Overview","text":"<pre><code>graph TB\n    subgraph \"Input Metrics\"\n        A[Logs Received] --&gt; B[Conversion Process]\n    end\n\n    subgraph \"Processing Metrics\"\n        B --&gt; C[Events Exported]\n        B --&gt; D[Conversion Errors]\n    end\n\n    subgraph \"Output Metrics\"\n        C --&gt; E[HTTP Requests]\n        E --&gt; F[HTTP Success]\n        E --&gt; G[HTTP Errors]\n    end\n\n    subgraph \"Performance Metrics\"\n        H[Request Duration] --&gt; I[Performance Analysis]\n        J[Batch Size] --&gt; K[Throughput Metrics]\n    end\n\n    style A fill:#e3f2fd\n    style C fill:#c8e6c9\n    style D fill:#ffcdd2\n    style F fill:#c8e6c9\n    style G fill:#ffcdd2</code></pre>"},{"location":"monitoring/telemetry-metrics/#core-metrics","title":"Core Metrics","text":""},{"location":"monitoring/telemetry-metrics/#input-metrics","title":"Input Metrics","text":"<pre><code>graph LR\n    A[OTEL Collector] --&gt; B[Logs Received]\n    B --&gt; C[Total Count]\n    B --&gt; D[Rate per Second]\n\n    style B fill:#e3f2fd\n    style C fill:#fff3e0\n    style D fill:#f3e5f5</code></pre> Metric Description Type Example <code>logs_received</code> Total number of log records received from the OpenTelemetry Collector Counter 1,000 logs <code>logs_received_rate</code> Rate of logs received per second Gauge 50 logs/sec"},{"location":"monitoring/telemetry-metrics/#processing-metrics","title":"Processing Metrics","text":"<pre><code>graph TD\n    A[Logs Received] --&gt; B{Conversion Success?}\n    B --&gt;|Yes| C[Events Exported]\n    B --&gt;|No| D[Conversion Errors]\n\n    style C fill:#c8e6c9\n    style D fill:#ffcdd2</code></pre> Metric Description Type Example <code>events_exported</code> Total number of security events successfully exported Counter 950 events <code>conversion_errors</code> Total number of log records that failed to convert to security events Counter 50 errors <code>conversion_success_rate</code> Percentage of successful conversions Gauge 95%"},{"location":"monitoring/telemetry-metrics/#output-metrics","title":"Output Metrics","text":"<pre><code>graph TD\n    A[Events Exported] --&gt; B[HTTP Requests]\n    B --&gt; C{HTTP Success?}\n    C --&gt;|Yes| D[HTTP Success]\n    C --&gt;|No| E[HTTP Errors]\n\n    style D fill:#c8e6c9\n    style E fill:#ffcdd2</code></pre> Metric Description Type Example <code>http_requests</code> Total number of HTTP requests sent to the security event endpoint Counter 20 requests <code>http_errors</code> Total number of HTTP requests that failed Counter 2 errors <code>http_success_rate</code> Percentage of successful HTTP requests Gauge 90%"},{"location":"monitoring/telemetry-metrics/#performance-metrics","title":"Performance Metrics","text":"<pre><code>graph LR\n    A[HTTP Request] --&gt; B[Request Duration]\n    B --&gt; C[Average Duration]\n    B --&gt; D[P95 Duration]\n    B --&gt; E[P99 Duration]\n\n    style B fill:#fff3e0\n    style C fill:#e3f2fd\n    style D fill:#f3e5f5\n    style E fill:#ffebee</code></pre> Metric Description Type Example <code>http_request_duration</code> Duration of HTTP requests Histogram 150ms average <code>batch_size</code> Number of events per batch Histogram 25 events/batch <code>throughput</code> Events processed per second Gauge 100 events/sec"},{"location":"monitoring/telemetry-metrics/#metrics-collection-flow","title":"Metrics Collection Flow","text":"<pre><code>sequenceDiagram\n    participant Exporter as Security Event Exporter\n    participant Metrics as Metrics Store\n    participant Logger as Structured Logger\n    participant Monitor as Monitoring System\n\n    Exporter-&gt;&gt;Metrics: Update logs_received\n    Exporter-&gt;&gt;Metrics: Update events_exported\n    Exporter-&gt;&gt;Metrics: Update http_requests\n    Exporter-&gt;&gt;Metrics: Update http_duration\n\n    Metrics-&gt;&gt;Logger: Log metrics\n    Logger-&gt;&gt;Monitor: Send to monitoring system\n\n    Monitor-&gt;&gt;Monitor: Generate alerts\n    Monitor-&gt;&gt;Monitor: Update dashboards</code></pre>"},{"location":"monitoring/telemetry-metrics/#metrics-reporting","title":"Metrics Reporting","text":""},{"location":"monitoring/telemetry-metrics/#startup-metrics","title":"Startup Metrics","text":"<pre><code>{\n  \"level\": \"debug\",\n  \"msg\": \"Initialized telemetry metrics\",\n  \"logs_received\": 0,\n  \"events_exported\": 0,\n  \"events_failed\": 0,\n  \"conversion_errors\": 0,\n  \"http_requests\": 0,\n  \"http_errors\": 0\n}\n</code></pre>"},{"location":"monitoring/telemetry-metrics/#batch-processing-metrics","title":"Batch Processing Metrics","text":"<pre><code>{\n  \"level\": \"info\",\n  \"msg\": \"Completed processing logs batch\",\n  \"total_resource_logs\": 5,\n  \"total_log_records\": 50,\n  \"successful_events\": 48,\n  \"failed_events\": 2,\n  \"http_requests\": 1\n}\n</code></pre>"},{"location":"monitoring/telemetry-metrics/#shutdown-metrics","title":"Shutdown Metrics","text":"<pre><code>{\n  \"level\": \"info\",\n  \"msg\": \"Final telemetry metrics\",\n  \"logs_received\": 1000,\n  \"events_exported\": 950,\n  \"events_failed\": 50,\n  \"conversion_errors\": 25,\n  \"http_requests\": 20,\n  \"http_errors\": 5,\n  \"http_duration_samples\": 20\n}\n</code></pre>"},{"location":"monitoring/telemetry-metrics/#performance-metrics_1","title":"Performance Metrics","text":"<pre><code>{\n  \"level\": \"info\",\n  \"msg\": \"HTTP request performance metrics\",\n  \"average_duration\": \"150ms\",\n  \"sample_count\": 20\n}\n</code></pre>"},{"location":"monitoring/telemetry-metrics/#monitoring-and-alerting","title":"Monitoring and Alerting","text":""},{"location":"monitoring/telemetry-metrics/#key-performance-indicators","title":"Key Performance Indicators","text":"<pre><code>graph TB\n    subgraph \"KPIs\"\n        A[Success Rate] --&gt; B[Events Exported / Total Events]\n        C[Error Rate] --&gt; D[Failed Events / Total Events]\n        E[Throughput] --&gt; F[Events per Second]\n        G[Latency] --&gt; H[Average HTTP Duration]\n    end\n\n    style B fill:#c8e6c9\n    style D fill:#ffcdd2\n    style F fill:#e3f2fd\n    style H fill:#fff3e0</code></pre>"},{"location":"monitoring/telemetry-metrics/#alerting-rules","title":"Alerting Rules","text":"<pre><code># Example alerting rules\nalerts:\n  - name: HighFailureRate\n    condition: events_failed / (events_exported + events_failed) &gt; 0.1\n    message: \"Security event exporter failure rate is above 10%\"\n    severity: warning\n\n  - name: HighHTTPErrorRate\n    condition: http_errors / http_requests &gt; 0.05\n    message: \"HTTP error rate is above 5%\"\n    severity: critical\n\n  - name: SlowResponseTime\n    condition: average_duration &gt; \"5s\"\n    message: \"Average HTTP response time is above 5 seconds\"\n    severity: warning\n\n  - name: LowThroughput\n    condition: throughput &lt; 10\n    message: \"Event throughput is below 10 events per second\"\n    severity: warning\n</code></pre>"},{"location":"monitoring/telemetry-metrics/#dashboard-metrics","title":"Dashboard Metrics","text":"<pre><code>graph TB\n    subgraph \"Dashboard Panels\"\n        A[Success Rate Gauge] --&gt; B[95% Target]\n        C[Error Rate Gauge] --&gt; D[&lt;5% Target]\n        E[Throughput Graph] --&gt; F[Events/sec over time]\n        G[Latency Graph] --&gt; H[Response time over time]\n    end\n\n    style B fill:#c8e6c9\n    style D fill:#ffcdd2\n    style F fill:#e3f2fd\n    style H fill:#fff3e0</code></pre>"},{"location":"monitoring/telemetry-metrics/#performance-optimization","title":"Performance Optimization","text":""},{"location":"monitoring/telemetry-metrics/#metrics-driven-optimization","title":"Metrics-Driven Optimization","text":"<pre><code>graph TD\n    A[Monitor Metrics] --&gt; B[Identify Bottlenecks]\n    B --&gt; C[Analyze Patterns]\n    C --&gt; D[Optimize Configuration]\n    D --&gt; E[Test Changes]\n    E --&gt; F[Deploy Updates]\n    F --&gt; A\n\n    style B fill:#fff3e0\n    style D fill:#e3f2fd\n    style F fill:#c8e6c9</code></pre>"},{"location":"monitoring/telemetry-metrics/#optimization-strategies","title":"Optimization Strategies","text":"<ol> <li>Batch Size Optimization</li> <li>Monitor <code>batch_size</code> metrics</li> <li>Adjust collector batch processor settings</li> <li> <p>Balance throughput vs. latency</p> </li> <li> <p>HTTP Performance Optimization</p> </li> <li>Monitor <code>http_request_duration</code></li> <li>Optimize endpoint configuration</li> <li> <p>Adjust timeout settings</p> </li> <li> <p>Error Rate Optimization</p> </li> <li>Monitor <code>conversion_errors</code> and <code>http_errors</code></li> <li>Identify problematic log patterns</li> <li>Adjust error handling logic</li> </ol>"},{"location":"monitoring/telemetry-metrics/#integration-with-monitoring-systems","title":"Integration with Monitoring Systems","text":""},{"location":"monitoring/telemetry-metrics/#prometheus-integration","title":"Prometheus Integration","text":"<pre><code>graph LR\n    A[Structured Logs] --&gt; B[Log Parser]\n    B --&gt; C[Metrics Extractor]\n    C --&gt; D[Prometheus Metrics]\n    D --&gt; E[Grafana Dashboard]\n\n    style A fill:#e3f2fd\n    style D fill:#fff3e0\n    style E fill:#f3e5f5</code></pre>"},{"location":"monitoring/telemetry-metrics/#log-parsing-for-metrics","title":"Log Parsing for Metrics","text":"<pre><code># Extract metrics from logs\ngrep \"Final telemetry metrics\" collector.logs | \\\njq -r '.logs_received, .events_exported, .events_failed' | \\\nawk '{print \"security_event_exporter_logs_received_total \" $1; print \"security_event_exporter_events_exported_total \" $2; print \"security_event_exporter_events_failed_total \" $3}'\n</code></pre>"},{"location":"monitoring/telemetry-metrics/#grafana-dashboard","title":"Grafana Dashboard","text":"<pre><code>{\n  \"dashboard\": {\n    \"title\": \"Security Event Exporter Metrics\",\n    \"panels\": [\n      {\n        \"title\": \"Success Rate\",\n        \"type\": \"stat\",\n        \"targets\": [\n          {\n            \"expr\": \"security_event_exporter_events_exported_total / (security_event_exporter_events_exported_total + security_event_exporter_events_failed_total) * 100\"\n          }\n        ]\n      },\n      {\n        \"title\": \"Throughput\",\n        \"type\": \"graph\",\n        \"targets\": [\n          {\n            \"expr\": \"rate(security_event_exporter_events_exported_total[5m])\"\n          }\n        ]\n      }\n    ]\n  }\n}\n</code></pre>"},{"location":"monitoring/telemetry-metrics/#troubleshooting","title":"Troubleshooting","text":""},{"location":"monitoring/telemetry-metrics/#common-issues-and-metrics","title":"Common Issues and Metrics","text":"<pre><code>graph TD\n    A[High Conversion Errors] --&gt; B[Check Log Format]\n    C[High HTTP Errors] --&gt; D[Verify Endpoint Config]\n    E[Slow Response Times] --&gt; F[Check Network Performance]\n    G[Low Throughput] --&gt; H[Optimize Batch Settings]\n\n    style B fill:#fff3e0\n    style D fill:#fff3e0\n    style F fill:#fff3e0\n    style H fill:#fff3e0</code></pre>"},{"location":"monitoring/telemetry-metrics/#debug-mode","title":"Debug Mode","text":"<p>Enable debug logging to get detailed metrics information:</p> <pre><code>service:\n  telemetry:\n    logs:\n      level: debug\n</code></pre> <p>This provides detailed metrics at each processing step, helping identify bottlenecks and issues.</p>"},{"location":"monitoring/telemetry-metrics/#performance-analysis","title":"Performance Analysis","text":"<pre><code>graph LR\n    A[Collect Metrics] --&gt; B[Analyze Trends]\n    B --&gt; C[Identify Issues]\n    C --&gt; D[Apply Fixes]\n    D --&gt; E[Monitor Results]\n    E --&gt; A\n\n    style C fill:#fff3e0\n    style D fill:#e3f2fd\n    style E fill:#c8e6c9</code></pre>"},{"location":"monitoring/telemetry-metrics/#future-enhancements","title":"Future Enhancements","text":"<p>Planned enhancements for metrics collection:</p> <pre><code>graph TB\n    subgraph \"Future Features\"\n        A[Native Prometheus Metrics] --&gt; B[Direct Integration]\n        C[Real-time Metrics] --&gt; D[Live Dashboard]\n        E[Custom Metrics] --&gt; F[User-defined Metrics]\n        G[Metrics Export] --&gt; H[External Processors]\n    end\n\n    style B fill:#e3f2fd\n    style D fill:#fff3e0\n    style F fill:#f3e5f5\n    style H fill:#c8e6c9</code></pre> <ol> <li>Native Prometheus Metrics: Direct integration with Prometheus metrics</li> <li>Real-time Metrics: Live metrics dashboard</li> <li>Custom Metrics: User-defined metrics for specific use cases</li> <li>Metrics Export: Export metrics to external processors</li> </ol>"}]}